<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.1.1">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2020-09-19T14:49:43+08:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">Securitainment.io</title><subtitle>learn | code | hack</subtitle><entry><title type="html">progit note 03</title><link href="http://localhost:4000/git/github/progit/note/2020/09/18/ProGit-note-03.html" rel="alternate" type="text/html" title="progit note 03" /><published>2020-09-18T20:29:01+08:00</published><updated>2020-09-18T20:29:01+08:00</updated><id>http://localhost:4000/git/github/progit/note/2020/09/18/ProGit-note-03</id><content type="html" xml:base="http://localhost:4000/git/github/progit/note/2020/09/18/ProGit-note-03.html">&lt;p&gt;本部分主要介绍 Git 的分支功能。&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;分支简介&quot;&gt;分支简介&lt;/h2&gt;
&lt;p&gt;Git 的分支，本质上仅仅是指向提交对象的可变指针。Git 的默认分支名字是 master，它会在每次提交操作中自动向前移动。&lt;/p&gt;

&lt;h3 id=&quot;分支创建&quot;&gt;分支创建&lt;/h3&gt;
&lt;p&gt;使用下面命令，创建 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;testing&lt;/code&gt; 分支：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git branch testing
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200913205026.jpeg&quot; alt=&quot;Figure 3-4. 两个指向相同提交历史的分支&quot; /&gt;&lt;/p&gt;

&lt;p&gt;这会在当前所在的提交对象上创建一个指针，新建的分支和原来的分支同时指向相同提交历史。Git 还存在一个名为 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;HEAD&lt;/code&gt; 的特殊指针，指向当前所在的本地分支。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200918202036.jpeg&quot; alt=&quot;Figure 3-5. HEAD指向当前所在分支&quot; /&gt;&lt;/p&gt;

&lt;p&gt;使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git log --decorate&lt;/code&gt;查看各个分支当前所指的对象：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git log &lt;span class=&quot;nt&quot;&gt;--oneline&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--decorate&lt;/span&gt;
f30ab &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;HEAD, master, testing&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; add feature &lt;span class=&quot;c&quot;&gt;#32 - ability to add new&lt;/span&gt;

34ac2 fixed bug &lt;span class=&quot;c&quot;&gt;#1328 - stack overflow under certain conditions&lt;/span&gt;

98ca9 initial commit of my project
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;分支切换&quot;&gt;分支切换&lt;/h3&gt;
&lt;p&gt;使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git checkout&lt;/code&gt;命令切换分支：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git checkout testing
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;这时 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;HEAD&lt;/code&gt;就指向 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;testing&lt;/code&gt; 分支了。
&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200918202207.jpeg&quot; alt=&quot;Figure 3-6. HEAD 指向当前所在的分支&quot; /&gt;&lt;/p&gt;

&lt;p&gt;再次修改并提交：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;vim test.rb
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git commit &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'made a change'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;此时的提交历史如下：
&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200918202228.jpeg&quot; alt=&quot;Figure 3-7. HEAD 分支随着提交操作自动向前移动&quot; /&gt;&lt;/p&gt;

&lt;p&gt;此时切回 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt; 分支：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git checkout master
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200918202241.jpeg&quot; alt=&quot;Figure 3-8. 检出时 HEAD 随之移动&quot; /&gt;&lt;/p&gt;

&lt;p&gt;此时 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git checkout&lt;/code&gt; 命令做了两件事：&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;使 HEAD 指回 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt; 分支&lt;/li&gt;
  &lt;li&gt;将工作目录恢复为 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt; 分支所指向的快照内容。&lt;/li&gt;
&lt;/ol&gt;

&lt;blockquote&gt;
  &lt;p&gt;分支切换会改变工作目录中的文件&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;此时再对项目文件进行修改并提交：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;vim test.rb
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git commit &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'made other changes'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;此时项目提交历史已经分叉。新的提交历史看起来如下：
&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200918202253.jpeg&quot; alt=&quot;Figure 3-9. 项目分叉历史&quot; /&gt;&lt;/p&gt;

&lt;p&gt;使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git log&lt;/code&gt; 命令查看分叉历史：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git log &lt;span class=&quot;nt&quot;&gt;--oneline&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--decorate&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--graph&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--all&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; c2b9e &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;HEAD, master&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; made other changes

| &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; 87ab2 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;testing&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; made a change

|/

&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; f30ab add feature &lt;span class=&quot;c&quot;&gt;#32 - ability to add new formats to the&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; 34ac2 fixed bug &lt;span class=&quot;c&quot;&gt;#1328 - stack overflow under certain conditions&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; 98ca9 initial commit of my project
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;分支的新建与合并&quot;&gt;分支的新建与合并&lt;/h2&gt;
&lt;p&gt;这里通过一个实际的例子，展示分支的新建与合并。&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;开发某个网站&lt;/li&gt;
  &lt;li&gt;为实现某个新需求，创建一个分支&lt;/li&gt;
  &lt;li&gt;在这个分支上开展工作&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;此时突然线上突然有一个严重的问题需要紧急修复：&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;切换到线上分支&lt;/li&gt;
  &lt;li&gt;为这个紧急任务创建一个分支，并修复问题&lt;/li&gt;
  &lt;li&gt;测试通过后，切换回线上分支，合并修补分支，将改动推送到线上分支&lt;/li&gt;
  &lt;li&gt;切换回最初的工作分支，继续工作&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;新建分支&quot;&gt;新建分支&lt;/h3&gt;
&lt;p&gt;假设现在的项目存在一些提交：
&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200918202302.jpeg&quot; alt=&quot;Figure 3-10. 一个简单的提交历史&quot; /&gt;&lt;/p&gt;

&lt;p&gt;现在需要解决紧急问题#53，可以使用带 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-b&lt;/code&gt; 参数的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git checokout&lt;/code&gt; 命令，新建分支同时切换到新分支：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git checkout &lt;span class=&quot;nt&quot;&gt;-b&lt;/span&gt; iss53
Switched to a new branch &lt;span class=&quot;s2&quot;&gt;&quot;iss53&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;该命令是下面两条命令的简写：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git branch iss53
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git checkout iss53
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200918202311.jpeg&quot; alt=&quot;Figure 3-11. 创建一个新分支指针&quot; /&gt;&lt;/p&gt;

&lt;p&gt;此时你针对 #53 问题进行了一些修改并提交，iss53 分支在不断推进：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;vim index.html
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git commit &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'added a new footer[issue 53]'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200918202339.jpeg&quot; alt=&quot;Figure 3-12. iss53 分支向前推进&quot; /&gt;
此时一个新的问题出现需要解决，需要我们新建一个针对该问题的分支（hotfix branch），并且解决问题：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git checkout &lt;span class=&quot;nt&quot;&gt;-b&lt;/span&gt; hotfix
Switched to a new branch &lt;span class=&quot;s1&quot;&gt;'hotfix'&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;vim index.html
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git commit &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'fixed the broken email address'&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;hotfix 1fb7853] fixed the broken email address

1 file changed, 2 insertions&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;+&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200918202353.jpeg&quot; alt=&quot;Figure 3-13. 基于 master 分支的紧急问题分支 hotfix&quot; /&gt;
当测试完成后，需要将 hotfix 分支合并到 master 分支，来部署到线上。使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git merge&lt;/code&gt; 命令来达到该目的：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git checkout master
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git merge hotfix
Updating f42c576..3a0874c

Fast-forward

index.html | 2 ++

1 file changed, 2 insertions&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;+&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;本次合并中有一个 ‘Fast-forword’ 关键词，意味着当前 master 分支所指的提交是现在提交 hotfix 分支的直接上游，此时 Git 只是简单的将指针向前移动。
&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200918202415.jpeg&quot; alt=&quot;Figure 3-14. master 被快进到 hotfix&quot; /&gt;&lt;/p&gt;

&lt;p&gt;这个紧急问题的解决方案发布之后，可以通过带 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-d&lt;/code&gt; 选项的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git branch&lt;/code&gt; 命令来删除分支：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git branch &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; hotfix
Deleted branch hotfix &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;3a0874c&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;现在可以切换回原来工作的分支（针对#53问题的分支）：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git checkout iss53
Switched to branch &lt;span class=&quot;s2&quot;&gt;&quot;iss53&quot;&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;vim index.html
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git commit &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'finished the new footer [issue 53]'&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;iss53 ad82d7a] finished the new footer &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;issue 53]

1 file changed, 1 insertion&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;+&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200918202430.jpeg&quot; alt=&quot;Figure 3-15. 继续在 iss53 分支上工作&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;分支的合并&quot;&gt;分支的合并&lt;/h3&gt;
&lt;p&gt;运行下面命令，将 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;iss53&lt;/code&gt; 分支合并到 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt; 分支中：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git checkout master
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git merge iss53
Merge made by the &lt;span class=&quot;s1&quot;&gt;'recursive'&lt;/span&gt; strategy.
index.html |    1 +
1 file changed, 1 insertion&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;+&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200918202513.jpeg&quot; alt=&quot;F3-16&quot; /&gt;&lt;/p&gt;

&lt;p&gt;合并成功后可以删除 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;iss53&lt;/code&gt; 分支：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git branch &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; iss53
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;遇到冲突时的分支合并&quot;&gt;遇到冲突时的分支合并&lt;/h3&gt;
&lt;p&gt;如果在合并时产生合并冲突：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git merge iss53

Auto-merging index.html

CONFLICT &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;content&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: Merge conflict &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;index.html

Automatic merge failed&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; fix conflicts and &lt;span class=&quot;k&quot;&gt;then &lt;/span&gt;commit the result.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;检查 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git status&lt;/code&gt; 时会显示如下：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git status

On branch master

You have unmerged paths.

  &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;fix conflicts and run &lt;span class=&quot;s2&quot;&gt;&quot;git commit&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;



Unmerged paths:

  &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;use &lt;span class=&quot;s2&quot;&gt;&quot;git add &amp;lt;file&amp;gt;...&quot;&lt;/span&gt; to mark resolution&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;



    both modified:      index.html



no changes added to commit &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;use &lt;span class=&quot;s2&quot;&gt;&quot;git add&quot;&lt;/span&gt; and/or &lt;span class=&quot;s2&quot;&gt;&quot;git commit -a&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;出现冲突的文件会包含一些特殊区段，类似：&lt;/p&gt;
&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;HEAD:index.html&lt;/span&gt;

&lt;span class=&quot;err&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;footer&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;contact : email.support@github.com&lt;span class=&quot;nt&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;

=======

&lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;footer&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;

please contact us at support@github.com

&lt;span class=&quot;nt&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;

&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; iss53:index.html
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;这表示 HEAD所指示的版本在这个区域的上半部分（======的上半部分），而 iss53 分支所指示的版本在======的下班部分。你必须选择其中那个一个，或者你也可以自行合并这些内容，比如将该部分替换为下面内容来解决冲突：&lt;/p&gt;
&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;footer&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;

please contact us at email.support@github.com

&lt;span class=&quot;nt&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;也可以使用图形化的工具来解决冲突，比如运行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git mergetool&lt;/code&gt; 启动一个合适的图形化工具：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git mergetool
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;等待退出图形化工具之后，Git 会讯问是否合并成功。如果回答是，Git 会暂存文件表明冲突已解决。可以运行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git status&lt;/code&gt; 来确认所有的合并冲突都已被解决：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git status

On branch master

All conflicts fixed but you are still merging.

  &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;use &lt;span class=&quot;s2&quot;&gt;&quot;git commit&quot;&lt;/span&gt; to conclude merge&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;



Changes to be committed:



    modified:   index.html
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;如果结果正确，并且之前有冲突的文件都已暂存，就可以使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git commit&lt;/code&gt; 来提交合并了。&lt;/p&gt;

&lt;h2 id=&quot;分支管理&quot;&gt;分支管理&lt;/h2&gt;
&lt;p&gt;运行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git branch&lt;/code&gt; 获得当前所有分支的列表：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git branch
  iss53
&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; master
  testing
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;注意 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt; 分支前的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*&lt;/code&gt; 字符，它代表现在检出的那个分支（也就是当前 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;HEAD&lt;/code&gt; 指针所指向的分支）。&lt;/p&gt;

&lt;p&gt;运行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git branch -v&lt;/code&gt; 查看每个分支的最后一次提交：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git branch &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt;

  iss53   93b412c fix javascript issue

&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; master  7a98805 Merge branch &lt;span class=&quot;s1&quot;&gt;'iss53'&lt;/span&gt;

  testing 782fd34 add scott to the author list &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;the readmes
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;使用带有 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--merged&lt;/code&gt; 和 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--no-merged&lt;/code&gt; 选项来过滤已经合并或尚未合并的分支：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git branch &lt;span class=&quot;nt&quot;&gt;--merged&lt;/span&gt;

  iss53

&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; master
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git branch -d&lt;/code&gt; 删除未合并的分支会提示失败：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git branch &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; testing

error: The branch &lt;span class=&quot;s1&quot;&gt;'testing'&lt;/span&gt; is not fully merged.

If you are sure you want to delete it, run &lt;span class=&quot;s1&quot;&gt;'git branch -D testing'&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;如果确实需要删除分支，可以使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-D&lt;/code&gt; 选项强制删除。&lt;/p&gt;

&lt;h2 id=&quot;远程分支&quot;&gt;远程分支&lt;/h2&gt;
&lt;p&gt;远程引用是对远程仓库的引用（指针），包括分支、标签等等。可以通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git ls-remote&lt;/code&gt; 来显式的获取远程引用的完整版本，或者通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git remote show&lt;/code&gt; 获得远程分支的更多信息。&lt;/p&gt;

&lt;p&gt;远程分支以(remote)/(branch)形式命名。例如查看最后一次与远程仓库 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;origin&lt;/code&gt; 通信时 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt; 分支的状态，可以查看 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;origin/master&lt;/code&gt; 分支。&lt;/p&gt;

&lt;p&gt;如果有一个 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git.ourcompany.com&lt;/code&gt; 的 Git 服务器，从这里克隆一个项目，Git 的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;clone&lt;/code&gt; 命令会将其自动名 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;origin&lt;/code&gt;，拉取它的所有数据，创建一个指向它的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt; 分支的指针，并且在本地将其命名为 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;origin/master&lt;/code&gt;。Git 也会创建一个与 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;origin&lt;/code&gt; 的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt; 分支指向同一个地方的本地 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt; 分支，这样就可以在此基础上工作了。&lt;/p&gt;

&lt;p&gt;如果此时你在本地 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt; 分支做了一定修改，同一时间其他人推送提交到远程 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt; 分支，那么只要你不和 origin 服务器连接，本地的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;origin/master&lt;/code&gt; 指针就不会移动。&lt;/p&gt;

&lt;p&gt;如果需要同步，运行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git fetch origin&lt;/code&gt; 命令。这个命令从 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;origin&lt;/code&gt; 服务器抓取本地没有的数据，并且更新本地数据库，移动 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;origin/master&lt;/code&gt; 指针指向新的、更新后的位置。&lt;/p&gt;

&lt;h3 id=&quot;推送&quot;&gt;推送&lt;/h3&gt;
&lt;p&gt;当需要将本地分支推送到远程仓库时，必须显式的推送想要分享的分支。&lt;/p&gt;

&lt;p&gt;如果希望推送 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;serverfix&lt;/code&gt; 分支，运行命令：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git push origin serverfix

Counting objects: 24, &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;

Delta compression using up to 8 threads.

Compressing objects: 100% &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;15/15&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;

Writing objects: 100% &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;24/24&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, 1.91 KiB | 0 bytes/s, &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;

Total 24 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;delta 2&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, reused 0 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;delta 0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

To https://github.com/schacon/simplegit

&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;new branch]      serverfix -&amp;gt; serverfix
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Git 自动将 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;serverfix&lt;/code&gt; 分支名字展开为 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;refs/heads/serverfix:refs/heads/serverfix&lt;/code&gt;，上面命令就意味着：推送本地的 serverfix 分支来更新远程的 serverfix 分支。如果需要为远程仓库上的分支使用不同的名称，可以运行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git push origin serverfix:awesomebranch&lt;/code&gt; 来将本地的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;serverfix&lt;/code&gt; 分支推送到远程仓库上的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;awesomebranch&lt;/code&gt; 分支。&lt;/p&gt;

&lt;p&gt;下一次其他协作者从服务器上抓取数据时，会在本地生成一个远程分支 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;origin/serverfix&lt;/code&gt;，指向服务器的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;serverfix&lt;/code&gt; 分支的引用：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git fetch origin

remote: Counting objects: 7, &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;

remote: Compressing objects: 100% &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;2/2&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;

remote: Total 3 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;delta 0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, reused 3 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;delta 0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

Unpacking objects: 100% &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;3/3&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;

From https://github.com/schacon/simplegit

&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;new branch]      serverfix    -&amp;gt; origin/serverfix
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;当抓取到新的远程跟踪分支时，本地不会自动生成一份可编辑的副本。如果想要在自己的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;serverfix&lt;/code&gt; 分支上工作，可以将其简历在远程跟踪分支上：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git checkout &lt;span class=&quot;nt&quot;&gt;-b&lt;/span&gt; serverfix origin/serverfix

Branch serverfix &lt;span class=&quot;nb&quot;&gt;set &lt;/span&gt;up to track remote branch serverfix from origin.

Switched to a new branch &lt;span class=&quot;s1&quot;&gt;'serverfix'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;跟踪分支&quot;&gt;跟踪分支&lt;/h3&gt;
&lt;p&gt;从一个远程跟踪分支检出一个本地分支会自动创建一个叫做“跟踪分支”。跟踪分支是与远程分支有直接关系的本地分支。如果在一个跟踪分支上执行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git pull&lt;/code&gt;，Git 能自动识别去哪个服务器抓取数据、合并到哪个分支。&lt;/p&gt;

&lt;p&gt;当使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git clone&lt;/code&gt; 克隆一个仓库时，它通常会自动创建一个跟踪 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;origin/master&lt;/code&gt; 的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt; 分支。可以手动设置其他跟踪分支/或者不跟踪。运行之前提过的命令 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git checkout -b [branch] [remotename]/[branch]&lt;/code&gt; 来跟踪指定的分支，或者使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--track&lt;/code&gt; 快捷方式：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git checkout &lt;span class=&quot;nt&quot;&gt;--track&lt;/span&gt; origin/serverfix

Branch serverfix &lt;span class=&quot;nb&quot;&gt;set &lt;/span&gt;up to track remote branch serverfix from origin.

Switched to a new branch &lt;span class=&quot;s1&quot;&gt;'serverfix'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;如果需要将本地分支与远程分支设置不同的名字，可以运行：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git checkout &lt;span class=&quot;nt&quot;&gt;-b&lt;/span&gt; sf origin/serverfix

Branch sf &lt;span class=&quot;nb&quot;&gt;set &lt;/span&gt;up to track remote branch serverfix from origin.

Switched to a new branch &lt;span class=&quot;s1&quot;&gt;'sf'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;此时，本地分支 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sf&lt;/code&gt; 会自动从 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;origin/master&lt;/code&gt; 拉取。&lt;/p&gt;

&lt;p&gt;设置已有的本地分支跟踪一个远程分支，或者修改正在跟踪的上游分支，可以使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-u&lt;/code&gt; 或 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--set-upstream-to&lt;/code&gt; 选项运行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git branch&lt;/code&gt; 来手动指定：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git branch &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt; origin/serverfix

Branch serverfix &lt;span class=&quot;nb&quot;&gt;set &lt;/span&gt;up to track remote branch serverfix from origin.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git branch -vv&lt;/code&gt; 来查看设置的所有跟踪分支，以及更多信息：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git branch &lt;span class=&quot;nt&quot;&gt;-vv&lt;/span&gt;

  iss53     7e424c3 &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;origin/iss53: ahead 2] forgot the brackets

  master    1ae2a45 &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;origin/master] deploying index fix

&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; serverfix f8674d9 &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;teamone/server-fix-good: ahead 3, behind 1] this should &lt;span class=&quot;k&quot;&gt;do &lt;/span&gt;it

  testing   5ea463a trying something new
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;这里看到 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;iss53&lt;/code&gt; 分支正在跟踪 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;origin/iss53&lt;/code&gt; 并且 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ahead 2&lt;/code&gt; 表示本地有两个提交没有推送到服务器；&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt; 分支正在跟踪 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;origin/master&lt;/code&gt; 并且是最新的；&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;serverfix&lt;/code&gt; 分支正在跟踪 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;teamone&lt;/code&gt; 服务器上的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;server-fix-good&lt;/code&gt; 分支并且有3次修改未提交到服务器，服务器有1次提交没有拉取合并；&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;testing&lt;/code&gt; 分支没有跟踪任何远程分支。&lt;/p&gt;

&lt;p&gt;需要注意的是该命令是本地执行的，显示的是上一次连接服务器时的状态。如果需要最新数据，需要在运行此命令前抓取所有的远程仓库：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git fetch &lt;span class=&quot;nt&quot;&gt;--all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;git branch &lt;span class=&quot;nt&quot;&gt;-vv&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;拉取&quot;&gt;拉取&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git fetch&lt;/code&gt; 命令只会抓取服务器上的数据，不会修改工作目录中的内容自动合并。另一个命令 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git pull&lt;/code&gt; 大多数情况下的含义是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git fetch&lt;/code&gt; 后面紧接着一个 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git merge&lt;/code&gt; 命令，如果本地分支已经设置好了跟踪分支（不管是手动设置的还是通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git clone&lt;/code&gt; 自动设置的），&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git pull&lt;/code&gt; 都会查找当前分支跟踪的服务器分支，从服务器获取最新数据并合并到本地的那个远程分支中。&lt;/p&gt;

&lt;p&gt;由于 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git pull&lt;/code&gt; 自动合并经常让人困惑，所以推荐单独使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fetch&lt;/code&gt; 和 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;merge&lt;/code&gt; 命令手动合并会更好一些。&lt;/p&gt;

&lt;h3 id=&quot;删除远程分支&quot;&gt;删除远程分支&lt;/h3&gt;
&lt;p&gt;通过带有 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--delete&lt;/code&gt; 选项的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git push&lt;/code&gt; 命令来删除远程分支：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git push origin &lt;span class=&quot;nt&quot;&gt;--delete&lt;/span&gt; serverfix

To https://github.com/schacon/simplegit

- &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;deleted]         serverfix
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;变基&quot;&gt;变基&lt;/h2&gt;
&lt;p&gt;在 Git 中整合来自不同分支的修改主要有两种方法：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;merge&lt;/code&gt; 和 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rebase&lt;/code&gt;。&lt;/p&gt;

&lt;h3 id=&quot;变基的基本操作&quot;&gt;变基的基本操作&lt;/h3&gt;
&lt;p&gt;整合分支最容易的方法是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;merge&lt;/code&gt; 命令。它会将两个分支最新快照以及两者最近的共同祖先进行三方合并，生成一个新的快照（并提交）。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200918202549.jpeg&quot; alt=&quot;F 3-28&quot; /&gt;&lt;/p&gt;

&lt;p&gt;另一种方法：提取在 C4 分支中引入的补丁和修改，然后在 C3 的基础上再应用一次。这种操作叫 #变基#。使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rebase&lt;/code&gt; 命令将提交到某一分支上的所有修改都移至另一分支上，就好像“重新播放”一样。&lt;/p&gt;

&lt;p&gt;这个例子的操作：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git checkout experiment
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git rebase master

First, rewinding &lt;span class=&quot;nb&quot;&gt;head &lt;/span&gt;to replay your work on top of it...

Applying: added staged &lt;span class=&quot;nb&quot;&gt;command&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;原理是：首先找到这两个分支（当前分支 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;experiment&lt;/code&gt;、变基操作的目标基底分支 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt;）的最近共同祖先 C2，然后对比当前分支相对于该祖先的历次提交，提取相应的修改并存为临时文件，然后将当前分支指向目标基底 C3，最后以此将之前另存为临时文件的修改依序应用。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200918202605.jpeg&quot; alt=&quot;F 3-29&quot; /&gt;&lt;/p&gt;

&lt;p&gt;现在回到 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt; 分支，进行依次快进合并：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git checkout master
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git merge experiment
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200918202617.jpeg&quot; alt=&quot;F 3-30&quot; /&gt;&lt;/p&gt;

&lt;p&gt;此时 C4’ 指向的快照就跟上面使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;merge&lt;/code&gt; 命令的例子中 C5 指向的快照一模一样了。这两种整合方法最终结果没有任何区别，但是变基会使得提交历史更加整洁。&lt;/p&gt;

&lt;h3 id=&quot;更有趣的变基例子&quot;&gt;更有趣的变基例子&lt;/h3&gt;
&lt;p&gt;在对两个分支进行变基时，所生成的“重演”并不一定需要在目标分支上应用，也可以指定另外的一个分支进行应用。&lt;/p&gt;

&lt;p&gt;下面例子是这样：在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt; 分支上创建了一个特性分支 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;server&lt;/code&gt;，提交了 C3 和 C4。然后在 C3 上创建了特性分支 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;client&lt;/code&gt;,提交了 C8 和 C9。最后在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;server&lt;/code&gt; 分支提交了 C10。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200918202629.jpeg&quot; alt=&quot;F 3-31&quot; /&gt;&lt;/p&gt;

&lt;p&gt;假设需要将 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;client&lt;/code&gt; 中的修改合并到 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt; 分支，但不需要合并 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;server&lt;/code&gt; 中的修改。可以使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git rebase&lt;/code&gt; 命令的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--onto&lt;/code&gt; 选项，选中在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;client&lt;/code&gt; 分支里但不在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;server&lt;/code&gt; 分支里的修改（C8/C9），将它们在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt; 分支上重演：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git rebase &lt;span class=&quot;nt&quot;&gt;--onto&lt;/span&gt; master server client
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;该命令的含义：取出 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;client&lt;/code&gt; 分支，找出处于 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;client&lt;/code&gt; 分支和 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;server&lt;/code&gt; 分支的共同祖先之后的修改，然后在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt; 分支上重演一遍。&lt;/p&gt;

&lt;p&gt;执行后的效果如图：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200918202641.jpeg&quot; alt=&quot;F 3-32&quot; /&gt;&lt;/p&gt;

&lt;p&gt;现在可以进行快速合并了：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git checkout master
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git merge client
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200918202650.jpeg&quot; alt=&quot;F 3-33&quot; /&gt;&lt;/p&gt;

&lt;p&gt;然后将 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;server&lt;/code&gt; 分支也整合进来：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git rebase master server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200918202702.jpeg&quot; alt=&quot;F 3-34&quot; /&gt;&lt;/p&gt;

&lt;p&gt;如图，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;server&lt;/code&gt; 的代码被“续”到了 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt; 后面&lt;/p&gt;

&lt;p&gt;然后再进行快进合并主分支 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt;：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git checkout master
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git merge server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;现在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;client&lt;/code&gt; 和 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;server&lt;/code&gt; 分支中的修改都已经整合到了主分支，可以删除这两个分支：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git branch &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; client
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git branch &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;最后的提交历史如图：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200918202713.jpeg&quot; alt=&quot;F 3-35&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;变基的风险&quot;&gt;变基的风险&lt;/h3&gt;

&lt;p&gt;不要对在你的仓库外有副本的分支执行变基，会使提交记录变得混乱。&lt;/p&gt;

&lt;h3 id=&quot;用变基解决变基&quot;&gt;用变基解决变基&lt;/h3&gt;

&lt;p&gt;如果真的发生了变基之后被重复提交的情况你，再次使用变基命令来整理。&lt;/p&gt;

&lt;p&gt;简单的方法是使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git pull --rebase&lt;/code&gt; 而不是直接使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git pull&lt;/code&gt;。或者可以手动 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git fetch&lt;/code&gt; 再执行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git rebase remote/master&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&quot;变基-vs-合并&quot;&gt;变基 vs. 合并&lt;/h3&gt;

&lt;p&gt;一种观点认为仓库的提交历史是 &lt;strong&gt;记录实际发生过什么&lt;/strong&gt; ；另一种是 &lt;strong&gt;项目过程中发生的故事&lt;/strong&gt;。&lt;/p&gt;

&lt;p&gt;总的原则是，只对尚未推送或分享给他人的本地修改执行变基操作，清理历史，从不对已推送的提交执行变基操作。&lt;/p&gt;</content><author><name></name></author><category term="git" /><category term="github" /><category term="progit" /><category term="note" /><summary type="html">本部分主要介绍 Git 的分支功能。</summary></entry><entry><title type="html">CentOS 配置登录会话超时，防止 SSH 自动退出</title><link href="http://localhost:4000/centos/ssh/2020/09/04/CentOS-setup-session-timeout-for-ssh-auto-logout.html" rel="alternate" type="text/html" title="CentOS 配置登录会话超时，防止 SSH 自动退出" /><published>2020-09-04T22:53:40+08:00</published><updated>2020-09-04T22:53:40+08:00</updated><id>http://localhost:4000/centos/ssh/2020/09/04/CentOS-setup-session-timeout-for-ssh-auto-logout</id><content type="html" xml:base="http://localhost:4000/centos/ssh/2020/09/04/CentOS-setup-session-timeout-for-ssh-auto-logout.html">&lt;p&gt;在远程管理 VPS 的时候经常会遇到登录会话无活动，导致会话超时 SSH 自动退出的问题，可以通过两个方式在服务端修改配置解决。&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/ssh/sshd_config&lt;/code&gt; 文件中的两个参数，和 SSH 无活动会话超时自动退出有关：&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ClientAliveInterval
ClientAliveCountMax
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sshd_config&lt;/code&gt; 的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;man&lt;/code&gt; 帮助页面有对于这两个参数的解释：&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ man sshd_config
     ClientAliveCountMax
             Sets the number of client alive messages (see below) which may be sent without sshd(8) receiving any messages back from the client. If this threshold is reached while client alive messages are being sent, sshd will disconnect the client, terminating the session. It is important to note that the use of client alive messages is very different from TCPKeepAlive (below). The client alive messages are sent through the encrypted channel and therefore will not be spoofable. The TCP keepalive option enabled by TCPKeepAlive is spoofable.  The client alive mechanism is valuable when the client or server depend on knowing when a connection has become inactive. The default value is 3. If ClientAliveInterval (see below) is set to 15, and ClientAliveCountMax is left at the default, unresponsive SSH clients will be disconnected after approximately 45 seconds. This option applies to protocol version 2 only.

     ClientAliveInterval
             Sets a timeout interval in seconds after which if no data has been received from the client, sshd(8) will send a message through the encrypted channel to request a response from the client. The default is 0, indicating that these messages will not be sent to the client. This option applies to protocol version 2 only.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;所以有两种方法来配置无活动会话超时。&lt;/p&gt;

&lt;h2 id=&quot;method-1&quot;&gt;Method 1&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/ssh/sshd_config&lt;/code&gt; 文件中配置超时参数&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;vi /etc/ssh/sshd_config
ClientAliveInterval 5m          &lt;span class=&quot;c&quot;&gt;# 5 分钟&lt;/span&gt;
ClientAliveCountMax 2           &lt;span class=&quot;c&quot;&gt;# 2 次&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;重启 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sshd&lt;/code&gt; 服务&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;service sshd restart
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;这样就将超时时间设置成了 10 分钟（5分钟检测一次客户端活动，共检测两次）。&lt;/p&gt;

&lt;h2 id=&quot;method-2&quot;&gt;Method 2&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;通过设置 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ClientAliveCountMax&lt;/code&gt; 为 0，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ClientAliveInterval&lt;/code&gt; 为 10m 来达到同样的效果&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;vi /etc/ssh/sshd_config
ClientAliveInterval 10m          &lt;span class=&quot;c&quot;&gt;# 10 minutes&lt;/span&gt;
ClientAliveCountMax 0            &lt;span class=&quot;c&quot;&gt;# 0 times&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;重启 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sshd&lt;/code&gt; 服务&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;service sshd restart
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;method-1-和-method-2-的不同&quot;&gt;Method 1 和 Method 2 的不同&lt;/h2&gt;

&lt;p&gt;Method 1 ：如果客户端 5 分钟没有活动，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sshd&lt;/code&gt; 会向客户端发送保持连接信息，最多发送两次，如果达到两次则断开客户端连接。&lt;/p&gt;

&lt;p&gt;Method 2 ：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sshd&lt;/code&gt; 不会向客户端发送信息，如果客户端 10 分钟没有活动（服务端 10 分钟没有收到客户端消息），服务端会直接断开连接。&lt;/p&gt;</content><author><name></name></author><category term="centos" /><category term="ssh" /><summary type="html">在远程管理 VPS 的时候经常会遇到登录会话无活动，导致会话超时 SSH 自动退出的问题，可以通过两个方式在服务端修改配置解决。</summary></entry><entry><title type="html">progit 笔记 02 - Git 基础</title><link href="http://localhost:4000/git/github/progit/note/2020/07/20/ProGit-note-02.html" rel="alternate" type="text/html" title="progit 笔记 02 - Git 基础" /><published>2020-07-20T00:46:25+08:00</published><updated>2020-07-20T00:46:25+08:00</updated><id>http://localhost:4000/git/github/progit/note/2020/07/20/ProGit-note-02</id><content type="html" xml:base="http://localhost:4000/git/github/progit/note/2020/07/20/ProGit-note-02.html">&lt;p&gt;本部分涵盖 Git 使用中的各种基本命令，包括初始化仓库（repository）、开始或停止跟踪（track）文件、暂存（stage）或提交（commit）更改；配置 Git 来忽略指定的文件和文件模式、撤销错误操作、浏览项目的历史版本以及不同提交（commits）间的差异、推送（push）到远程仓库以及从远程仓库拉取（pull）文件等。&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;获取-git-仓库&quot;&gt;获取 Git 仓库&lt;/h2&gt;
&lt;h3 id=&quot;在现有的项目目录中初始化仓库&quot;&gt;在现有的项目目录中初始化仓库&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git init
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;该命令将创建一个 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.git&lt;/code&gt; 子目录，这个子目录包含初始化的 Git 仓库中所有的必须文件，这些文件是 Git 仓库的骨干。 这时仅做了初始化，项目文件还没有被跟踪。通过以下命令跟踪并提交&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git add &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.c
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git add LICENSE
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git commit &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'initial project version'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;这样就得到了一个跟踪着若干文件的 Git 仓库。&lt;/p&gt;

&lt;h3 id=&quot;克隆现有仓库&quot;&gt;克隆现有仓库&lt;/h3&gt;

&lt;p&gt;使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git clone&lt;/code&gt; 命令克隆一个现有仓库，比如克隆 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;libgit2&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git clone https://github.com/libgit2/libgit2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;这会在当前目录下创建一个 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;libgit2&lt;/code&gt; 目录，并在该目录下初始化一个 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.git&lt;/code&gt; 文件夹，从远程仓库拉取所有数据存放在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.git&lt;/code&gt; 文件夹内，然后从中读取最新版本的拷贝，并且存放在应该在的位置。&lt;/p&gt;

&lt;p&gt;如果想要自定义本地仓库的名字，可以使用下面的命令：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git clone https://github.com/libgit2/libgit2 mylibgit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;这样在本地创建的仓库名字就会变为 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mylibgit&lt;/code&gt;。&lt;/p&gt;

&lt;h2 id=&quot;检查当前文件状态&quot;&gt;检查当前文件状态&lt;/h2&gt;
&lt;p&gt;使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git status&lt;/code&gt; 命令查看仓库中哪些文件处于什么状态。如果检查刚克隆后的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;libgit2&lt;/code&gt; 仓库，会看到类似输出：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git status

On branch master

nothing to commit, working directory clean
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;此时新建一个 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;README&lt;/code&gt; 文件，再次使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git status&lt;/code&gt; 命令时，将看到一个新的未追踪文件：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'My Project'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; README
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git status
On branch master

No commits yet

Untracked files:
  &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;use &lt;span class=&quot;s2&quot;&gt;&quot;git add &amp;lt;file&amp;gt;...&quot;&lt;/span&gt; to include &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;what will be committed&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	README

nothing added to commit but untracked files present &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;use &lt;span class=&quot;s2&quot;&gt;&quot;git add&quot;&lt;/span&gt; to track&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;在状态报告中可以看到 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;README&lt;/code&gt; 文件出现在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;untracked files&lt;/code&gt; 下面。未跟踪的文件意味着 Git 在之前的快照（提交）中没有这些文件；Git 不会自动将之纳入跟踪范围，除非你明明白白地告诉它“我需要跟踪该文件”。&lt;/p&gt;

&lt;h3 id=&quot;跟踪新文件&quot;&gt;跟踪新文件&lt;/h3&gt;

&lt;p&gt;使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git add&lt;/code&gt; 命令开始跟踪一个文件。&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git add&lt;/code&gt; 命令使用文件或目录的路径作为参数；如果参数是目录的路径，该命令将递归地跟踪该目录下的所有文件。比如要跟踪 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;README&lt;/code&gt; 文件：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git add README
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;此时再运行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git status&lt;/code&gt; 检查状态，会看到 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;README&lt;/code&gt; 文件已被跟踪，并且处于暂存状态：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git status
On branch master

No commits yet

Changes to be committed:
  &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;use &lt;span class=&quot;s2&quot;&gt;&quot;git rm --cached &amp;lt;file&amp;gt;...&quot;&lt;/span&gt; to unstage&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	new file:   README

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;这里可以看到文件在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Changes to be committed&lt;/code&gt; 下面，说明是已暂存状态。&lt;/p&gt;

&lt;h3 id=&quot;暂存已修改的文件&quot;&gt;暂存已修改的文件&lt;/h3&gt;
&lt;p&gt;如果修改了 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;README&lt;/code&gt; 文件，再次运行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git status&lt;/code&gt; 时将会看到：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git status
On branch master

No commits yet

Changes to be committed:
  &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;use &lt;span class=&quot;s2&quot;&gt;&quot;git rm --cached &amp;lt;file&amp;gt;...&quot;&lt;/span&gt; to unstage&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	new file:   README

Changes not staged &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;commit:
  &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;use &lt;span class=&quot;s2&quot;&gt;&quot;git add &amp;lt;file&amp;gt;...&quot;&lt;/span&gt; to update what will be committed&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;use &lt;span class=&quot;s2&quot;&gt;&quot;git restore &amp;lt;file&amp;gt;...&quot;&lt;/span&gt; to discard changes &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;working directory&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	modified:   README

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;这时 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;README&lt;/code&gt; 文件同时出现在等待提交区（暂存区）和未暂存区，是因为 Git 只暂存了上次运行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git add&lt;/code&gt; 命令时的那个版本，而不是当前修改过的版本。&lt;/p&gt;

&lt;p&gt;在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Changes not staged for commit:&lt;/code&gt; 看到 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;README&lt;/code&gt; 说明已修改了但是没有放到暂存区。要暂存这次更新，需要运行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git add&lt;/code&gt; 命令。 这是个多功能命令：可以用它开始跟踪新文件，或者把已跟踪的文件放到暂存区，还能用于合并时把有冲突的文件标记为已解决状态等。这个命令理解为“添加内容到下一次提交中”而不是“将一个文件添加到项目中”要更加合适。&lt;/p&gt;

&lt;p&gt;将修改后的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;README&lt;/code&gt; 文件添加到下一次提交，并再次查看状态：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git add README
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git status
On branch master

No commits yet

Changes to be committed:
  &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;use &lt;span class=&quot;s2&quot;&gt;&quot;git rm --cached &amp;lt;file&amp;gt;...&quot;&lt;/span&gt; to unstage&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	new file:   README

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;状态简览&quot;&gt;状态简览&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git status&lt;/code&gt; 命令输出当前仓库状态信息。使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git status -s&lt;/code&gt; 或 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git status --short&lt;/code&gt; 获得更为紧凑的状态信息：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git status &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt;
A  NEWADD
M  README
MM UNSTAGED
?? LICENSE.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;上面的报告表示，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NEWADD&lt;/code&gt; 文件前的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;A&lt;/code&gt; 表示该文件是新添加的并且放入了暂存区，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;README&lt;/code&gt; 前的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;M&lt;/code&gt; 表示文件被修改了并且放入了暂存区，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;UNSTAGED&lt;/code&gt; 文件前左边的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;M&lt;/code&gt; 表示被修改并且放入了暂存区，右边的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;M&lt;/code&gt; 表示文件被修改但还未放入暂存区，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;LICENSE.txt&lt;/code&gt; 前的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;??&lt;/code&gt; 表示文件未被追踪。&lt;/p&gt;

&lt;h3 id=&quot;忽略文件&quot;&gt;忽略文件&lt;/h3&gt;
&lt;p&gt;创建 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.gitignore&lt;/code&gt; 文件来忽略日志文件，或者编译过程中创建的临时文件等。&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; .gitignore

&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.[oa]

&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;~
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;第一行表示忽略后缀名是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;o&lt;/code&gt; 或者以 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a&lt;/code&gt; 的文件，第二行告诉 Git 忽略所有以 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~&lt;/code&gt; 符号结尾的文件。&lt;/p&gt;

&lt;p&gt;文件 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.gitignore&lt;/code&gt; 的格式规范如下：&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;所有空行或者以 ＃ 开头的行都会被 Git 忽略。&lt;/li&gt;
  &lt;li&gt;可以使用标准的 glob 模式匹配。&lt;/li&gt;
  &lt;li&gt;匹配模式可以以（/）开头防止递归。&lt;/li&gt;
  &lt;li&gt;匹配模式可以以（/）结尾指定目录。&lt;/li&gt;
  &lt;li&gt;要忽略指定模式以外的文件或目录，可以在模式前加上惊叹号（!）取反。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;glob 模式是指 shell 所使用的简化了的正则表达式。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;GitHub 有一个十分详细的针对数十种项目及语言的 .gitignore 文件列表，你可以在 &lt;a href=&quot;https://github.com/github/gitignore&quot;&gt;https://github.com/github/gitignore&lt;/a&gt; 找到它.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;查看已暂存和未暂存的修改&quot;&gt;查看已暂存和未暂存的修改&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git diff&lt;/code&gt; 命令查看未暂存的文件更新了哪些部分：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git diff
diff &lt;span class=&quot;nt&quot;&gt;--git&lt;/span&gt; a/UNSTAGED b/UNSTAGED
index f3229c5..eb1ae45 100644
&lt;span class=&quot;nt&quot;&gt;---&lt;/span&gt; a/UNSTAGED
+++ b/UNSTAGED
@@ &lt;span class=&quot;nt&quot;&gt;-1&lt;/span&gt; +1 @@
-..
+...
&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;END&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;若要查看已暂存的将要提交到下次更新里的内容，可以使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git diff --cached&lt;/code&gt; 或者 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git diff --staged&lt;/code&gt;（Git &amp;gt;= 1.6.1）命令查看：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git diff &lt;span class=&quot;nt&quot;&gt;--staged&lt;/span&gt;
diff &lt;span class=&quot;nt&quot;&gt;--git&lt;/span&gt; a/NEWADD b/NEWADD
new file mode 100644
index 0000000..e69de29
diff &lt;span class=&quot;nt&quot;&gt;--git&lt;/span&gt; a/README b/README
index 0e6bdc2..e00a688 100644
&lt;span class=&quot;nt&quot;&gt;---&lt;/span&gt; a/README
+++ b/README
@@ &lt;span class=&quot;nt&quot;&gt;-1&lt;/span&gt; +1 @@
&lt;span class=&quot;nt&quot;&gt;-my&lt;/span&gt; project.
+my project..
diff &lt;span class=&quot;nt&quot;&gt;--git&lt;/span&gt; a/UNSTAGED b/UNSTAGED
index 9c558e3..f3229c5 100644
&lt;span class=&quot;nt&quot;&gt;---&lt;/span&gt; a/UNSTAGED
+++ b/UNSTAGED
@@ &lt;span class=&quot;nt&quot;&gt;-1&lt;/span&gt; +1 @@
-.
+..
&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;END&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;还可以通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git difftool&lt;/code&gt; 命令使用图形化界面分析文件差异&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;提交更新&quot;&gt;提交更新&lt;/h3&gt;
&lt;p&gt;当确保修改过的文件都已暂存（通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git add&lt;/code&gt; 添加修改过但还未暂存的文件），就可以准备提交了。运行提交命令 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git commit&lt;/code&gt;：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git commit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;该命令会启动文本编辑器，以便输入本次提交更新的说明。编辑器会显示下面的文本信息：&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
# Please enter the commit message for your changes. Lines starting
# with '#' will be ignored, and an empty message aborts the commit.
#
# On branch master
# Changes to be committed:
#       new file:   NEWADD
#       modified:   README
#       modified:   UNSTAGED
#
# Changes not staged for commit:
#       modified:   UNSTAGED
#
# Untracked files:
#       LICENSE.txt
#
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;默认的提交信息会包括最后一次运行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git status&lt;/code&gt; 的输出，放在注释行里，并且开头有一空行，用来输入提交说明。另外可以使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git commit -m&lt;/code&gt; 来将提交信息和命令放在同一行进行提交：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git commit &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Story 182: Fix benchmarks for speed&quot;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;master c800db7] Story 182: Fix benchmarks &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;speed
 3 files changed, 2 insertions&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;+&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, 2 deletions&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;-&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
 create mode 100644 NEWADD
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;此时便完成了提交。&lt;/p&gt;

&lt;h3 id=&quot;跳过使用暂存区域&quot;&gt;跳过使用暂存区域&lt;/h3&gt;
&lt;p&gt;使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git commit -a -m&lt;/code&gt; 来跳过暂存步骤，Git 会自动把所有已经跟踪过的文件暂存起来一并提交:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git status
On branch master
Changes not staged &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;commit:
  &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;use &lt;span class=&quot;s2&quot;&gt;&quot;git add &amp;lt;file&amp;gt;...&quot;&lt;/span&gt; to update what will be committed&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;use &lt;span class=&quot;s2&quot;&gt;&quot;git restore &amp;lt;file&amp;gt;...&quot;&lt;/span&gt; to discard changes &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;working directory&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	modified:   CONTRIBUTING.md

no changes added to commit &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;use &lt;span class=&quot;s2&quot;&gt;&quot;git add&quot;&lt;/span&gt; and/or &lt;span class=&quot;s2&quot;&gt;&quot;git commit -a&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git commit &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;added new benchmarks&quot;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;master 4520c36] added new benchmarks
 1 file changed, 1 insertion&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;+&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;移除文件&quot;&gt;移除文件&lt;/h3&gt;
&lt;p&gt;要从 Git 中移除某个文件，要从已跟踪的文件清单中移除（从暂存区移除），然后提交。使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git rm&lt;/code&gt; 命令，连带从工作目录中删除指定文件，这样以后就不会出现在未跟踪文件清单中了。&lt;/p&gt;

&lt;p&gt;如果只是手动从工作目录中删除文件，运行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git status&lt;/code&gt; 时就会在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;“Changes not staged for commit”&lt;/code&gt; 部分（也就是&lt;em&gt;未暂存清单&lt;/em&gt;）看到：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;rm &lt;/span&gt;PROJECTS.md
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git status
On branch master
Changes not staged &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;commit:
  &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;use &lt;span class=&quot;s2&quot;&gt;&quot;git add/rm &amp;lt;file&amp;gt;...&quot;&lt;/span&gt; to update what will be committed&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;use &lt;span class=&quot;s2&quot;&gt;&quot;git restore &amp;lt;file&amp;gt;...&quot;&lt;/span&gt; to discard changes &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;working directory&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	deleted:    PROJECTS.md

no changes added to commit &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;use &lt;span class=&quot;s2&quot;&gt;&quot;git add&quot;&lt;/span&gt; and/or &lt;span class=&quot;s2&quot;&gt;&quot;git commit -a&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;然后需要再运行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git rm&lt;/code&gt; 操作来移除此文件，这样下次提交时，该文件就不再纳入版本管理了。&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git &lt;span class=&quot;nb&quot;&gt;rm &lt;/span&gt;PROJECTS.md
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git status
On branch master
Changes to be committed:
  &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;use &lt;span class=&quot;s2&quot;&gt;&quot;git restore --staged &amp;lt;file&amp;gt;...&quot;&lt;/span&gt; to unstage&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	deleted:    PROJECTS.md

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;如果删除之前，已修改过并且放入了暂存区，必须使用强制删除选项 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-f&lt;/code&gt; 。&lt;/p&gt;

&lt;p&gt;如果我们想把文件从暂存区删除，但是不想删除本地文件的话，使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--cached&lt;/code&gt; 选项：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git &lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--cached&lt;/span&gt; README
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;移动文件&quot;&gt;移动文件&lt;/h3&gt;
&lt;p&gt;要在 Git 中修改文件名，可以使用下面的命令：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git &lt;span class=&quot;nb&quot;&gt;mv &lt;/span&gt;file_from file_to
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;此时查看状态信息：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git &lt;span class=&quot;nb&quot;&gt;mv &lt;/span&gt;README README.md
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git status
On branch master
Changes to be committed:
  &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;use &lt;span class=&quot;s2&quot;&gt;&quot;git restore --staged &amp;lt;file&amp;gt;...&quot;&lt;/span&gt; to unstage&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	renamed:    README -&amp;gt; README.md

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;该命令相当于：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;mv &lt;/span&gt;README README.md
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git &lt;span class=&quot;nb&quot;&gt;rm &lt;/span&gt;README
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git add README.md
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;查看提交历史&quot;&gt;查看提交历史&lt;/h2&gt;
&lt;p&gt;使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git log&lt;/code&gt; 命令查看并回顾提交历史：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git log
commit ca82a6dff817ec66f44342007202690a93763949 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;HEAD -&amp;gt; master, origin/master, origin/HEAD&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Author: Scott Chacon &amp;lt;schacon@gmail.com&amp;gt;
Date:   Mon Mar 17 21:52:11 2008 &lt;span class=&quot;nt&quot;&gt;-0700&lt;/span&gt;

    changed the verison number

commit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7
Author: Scott Chacon &amp;lt;schacon@gmail.com&amp;gt;
Date:   Sat Mar 15 16:40:33 2008 &lt;span class=&quot;nt&quot;&gt;-0700&lt;/span&gt;

    removed unnecessary &lt;span class=&quot;nb&quot;&gt;test &lt;/span&gt;code

commit a11bef06a3f659402fe7563abf99ad00de2209e6
Author: Scott Chacon &amp;lt;schacon@gmail.com&amp;gt;
Date:   Sat Mar 15 10:31:28 2008 &lt;span class=&quot;nt&quot;&gt;-0700&lt;/span&gt;

    first commit
&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;END&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-p&lt;/code&gt; 参数，来显示每次提交的内容差异。也可以加上 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-2&lt;/code&gt; 来显示仅最近2次提交：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git log &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-2&lt;/span&gt;
commit ca82a6dff817ec66f44342007202690a93763949 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;HEAD -&amp;gt; master, origin/master, origin/HEAD&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Author: Scott Chacon &amp;lt;schacon@gmail.com&amp;gt;
Date:   Mon Mar 17 21:52:11 2008 &lt;span class=&quot;nt&quot;&gt;-0700&lt;/span&gt;

    changed the verison number

diff &lt;span class=&quot;nt&quot;&gt;--git&lt;/span&gt; a/Rakefile b/Rakefile
index a874b73..8f94139 100644
&lt;span class=&quot;nt&quot;&gt;---&lt;/span&gt; a/Rakefile
+++ b/Rakefile
@@ &lt;span class=&quot;nt&quot;&gt;-5&lt;/span&gt;,7 +5,7 @@ require &lt;span class=&quot;s1&quot;&gt;'rake/gempackagetask'&lt;/span&gt;
 spec &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; Gem::Specification.new &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; |s|
     s.platform  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;   Gem::Platform::RUBY
     s.name      &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;   &lt;span class=&quot;s2&quot;&gt;&quot;simplegit&quot;&lt;/span&gt;
-    s.version   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;   &lt;span class=&quot;s2&quot;&gt;&quot;0.1.0&quot;&lt;/span&gt;
+    s.version   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;   &lt;span class=&quot;s2&quot;&gt;&quot;0.1.1&quot;&lt;/span&gt;
     s.author    &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;   &lt;span class=&quot;s2&quot;&gt;&quot;Scott Chacon&quot;&lt;/span&gt;
     s.email     &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;   &lt;span class=&quot;s2&quot;&gt;&quot;schacon@gmail.com&quot;&lt;/span&gt;
     s.summary   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;   &lt;span class=&quot;s2&quot;&gt;&quot;A simple gem for using Git in Ruby code.&quot;&lt;/span&gt;

commit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7
Author: Scott Chacon &amp;lt;schacon@gmail.com&amp;gt;
Date:   Sat Mar 15 16:40:33 2008 &lt;span class=&quot;nt&quot;&gt;-0700&lt;/span&gt;

    removed unnecessary &lt;span class=&quot;nb&quot;&gt;test &lt;/span&gt;code

diff &lt;span class=&quot;nt&quot;&gt;--git&lt;/span&gt; a/lib/simplegit.rb b/lib/simplegit.rb
index a0a60ae..47c6340 100644
&lt;span class=&quot;nt&quot;&gt;---&lt;/span&gt; a/lib/simplegit.rb
+++ b/lib/simplegit.rb
@@ &lt;span class=&quot;nt&quot;&gt;-18&lt;/span&gt;,8 +18,3 @@ class SimpleGit
     end

 end
-
&lt;span class=&quot;nt&quot;&gt;-if&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; __FILE__
-  git &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; SimpleGit.new
-  puts git.show
&lt;span class=&quot;nt&quot;&gt;-end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--stat&lt;/code&gt; 选项，显示每次提交的简略信息：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git log &lt;span class=&quot;nt&quot;&gt;--stat&lt;/span&gt;
commit ca82a6dff817ec66f44342007202690a93763949 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;HEAD -&amp;gt; master, origin/master, origin/HEAD&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Author: Scott Chacon &amp;lt;schacon@gmail.com&amp;gt;
Date:   Mon Mar 17 21:52:11 2008 &lt;span class=&quot;nt&quot;&gt;-0700&lt;/span&gt;

    changed the verison number

 Rakefile | 2 +-
 1 file changed, 1 insertion&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;+&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, 1 deletion&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;-&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

commit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7
Author: Scott Chacon &amp;lt;schacon@gmail.com&amp;gt;
Date:   Sat Mar 15 16:40:33 2008 &lt;span class=&quot;nt&quot;&gt;-0700&lt;/span&gt;

    removed unnecessary &lt;span class=&quot;nb&quot;&gt;test &lt;/span&gt;code

 lib/simplegit.rb | 5 &lt;span class=&quot;nt&quot;&gt;-----&lt;/span&gt;
 1 file changed, 5 deletions&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;-&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

commit a11bef06a3f659402fe7563abf99ad00de2209e6
Author: Scott Chacon &amp;lt;schacon@gmail.com&amp;gt;
Date:   Sat Mar 15 10:31:28 2008 &lt;span class=&quot;nt&quot;&gt;-0700&lt;/span&gt;

    first commit

 README           |  6 ++++++
 Rakefile         | 23 +++++++++++++++++++++++
 lib/simplegit.rb | 25 +++++++++++++++++++++++++
 3 files changed, 54 insertions&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;+&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;END&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--pretty=&amp;lt;&amp;gt;&lt;/code&gt; 选项来用不同的方式展示提交历史，如：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git log &lt;span class=&quot;nt&quot;&gt;--pretty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;online
ca82a6dff817ec66f44342007202690a93763949 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;HEAD -&amp;gt; master, origin/master, origin/HEAD&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; changed the verison number
085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7 removed unnecessary &lt;span class=&quot;nb&quot;&gt;test &lt;/span&gt;code
a11bef06a3f659402fe7563abf99ad00de2209e6 first commit
&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;END&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;format&lt;/code&gt; 参数来定制显示的记录格式：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git log &lt;span class=&quot;nt&quot;&gt;--pretty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;format:&lt;span class=&quot;s2&quot;&gt;&quot;%h - %an, %ar : %s&quot;&lt;/span&gt;
ca82a6d - Scott Chacon, 12 years ago : changed the verison number
085bb3b - Scott Chacon, 12 years ago : removed unnecessary &lt;span class=&quot;nb&quot;&gt;test &lt;/span&gt;code
a11bef0 - Scott Chacon, 12 years ago : first commit
&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;END&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;更多选项查看 &lt;a href=&quot;https://git-scm.com/docs/pretty-formats&quot;&gt;pretty-formats&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;如果使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;online&lt;/code&gt; 或 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;format&lt;/code&gt; 选项时配合 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--graph&lt;/code&gt; 使用，会添加一些 ASCII 字符串来形象的展示分支、合并历史：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git log &lt;span class=&quot;nt&quot;&gt;--pretty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;online &lt;span class=&quot;nt&quot;&gt;--graph&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git log&lt;/code&gt; 详细参数参考 &lt;a href=&quot;https://git-scm.com/docs/git-log&quot;&gt;git-log&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;撤消操作&quot;&gt;撤消操作&lt;/h2&gt;
&lt;p&gt;有些撤消操作是不可逆的。 这是在使用 Git 的过程中，会因为操作失误而导致之前的工作丢失的少有的几个地方之一。&lt;/p&gt;

&lt;p&gt;当我们提交完成后发现漏掉了文件，或者提交信息填写错误，可以运行带有 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--amend&lt;/code&gt; 选项的提交命令，重新提交。&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git commit &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'initial commit'&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git add forgotten_file

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git commit &lt;span class=&quot;nt&quot;&gt;--amend&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;这个命令会将暂存区的文件提交；如果暂存区没有文件（自上次提交后没有修改，如上次提交后马上执行此命令），那么快照会保持不变，只是提示修改提交信息。最终只会有一个提交，第二次提交将替代第一次提交。&lt;/p&gt;

&lt;h3 id=&quot;取消暂存的文件&quot;&gt;取消暂存的文件&lt;/h3&gt;

&lt;p&gt;使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git reset HEAD &amp;lt;file&amp;gt;...&lt;/code&gt; 来取消暂存某个文件：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git status

On branch master

Changes to be committed:

  &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;use &lt;span class=&quot;s2&quot;&gt;&quot;git reset HEAD &amp;lt;file&amp;gt;...&quot;&lt;/span&gt; to unstage&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;



    renamed:    README.md -&amp;gt; README

    modified:   CONTRIBUTING.md

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git reset HEAD CONTRIBUTING.md

Unstaged changes after reset:

M CONTRIBUTING.md

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git status

On branch master

Changes to be committed:

  &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;use &lt;span class=&quot;s2&quot;&gt;&quot;git reset HEAD &amp;lt;file&amp;gt;...&quot;&lt;/span&gt; to unstage&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;



    renamed:    README.md -&amp;gt; README



Changes not staged &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;commit:

  &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;use &lt;span class=&quot;s2&quot;&gt;&quot;git add &amp;lt;file&amp;gt;...&quot;&lt;/span&gt; to update what will be committed&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;use &lt;span class=&quot;s2&quot;&gt;&quot;git checkout -- &amp;lt;file&amp;gt;...&quot;&lt;/span&gt; to discard changes &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;working directory&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;



    modified:   CONTRIBUTING.md

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;撤消对文件的修改&quot;&gt;撤消对文件的修改&lt;/h3&gt;

&lt;p&gt;使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git checkout -- &amp;lt;file&amp;gt;...&lt;/code&gt; 来把文件还原到上次提交时的样子。如还原 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CONTRIBUTING.md&lt;/code&gt; 文件：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git checkout &lt;span class=&quot;nt&quot;&gt;--&lt;/span&gt; CONTRIBUTING.md

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git status

On branch master

Changes to be committed:

  &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;use &lt;span class=&quot;s2&quot;&gt;&quot;git reset HEAD &amp;lt;file&amp;gt;...&quot;&lt;/span&gt; to unstage&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;



    renamed:    README.md -&amp;gt; README

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git checkout -- [file]&lt;/code&gt; 是一个危险的命令，Git 只是拷贝了另一个文件来覆盖它，所以对它做的修改历史都会消失。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;远程仓库的使用&quot;&gt;远程仓库的使用&lt;/h2&gt;
&lt;h3 id=&quot;查看远程仓库&quot;&gt;查看远程仓库&lt;/h3&gt;
&lt;p&gt;使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git remote&lt;/code&gt; 命令查看已经配置了的远程仓库服务器。如果你试着在自己克隆的项目目录运行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git remote&lt;/code&gt; 那么至少能看到 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;origin&lt;/code&gt;：这是 Git 给克隆的仓库服务器的默认名字：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git clone https://github.com/schacon/ticgit
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;ticgit
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git remote

使用 &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;git remote &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt; 会显示远程仓库的 Git 简写以及对应的 URL。

&lt;span class=&quot;sb&quot;&gt;```&lt;/span&gt;bash
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git remote &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt;

origin https://github.com/schacon/ticgit &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;fetch&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

origin https://github.com/schacon/ticgit &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;push&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;如果远程仓库不止一个（与多个协作者合作的仓库），那么输出将会像是这样：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;grit
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git remote &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt;

bakkdoor  https://github.com/bakkdoor/grit &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;fetch&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

bakkdoor  https://github.com/bakkdoor/grit &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;push&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

cho45     https://github.com/cho45/grit &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;fetch&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

cho45     https://github.com/cho45/grit &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;push&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

defunkt   https://github.com/defunkt/grit &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;fetch&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

defunkt   https://github.com/defunkt/grit &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;push&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

koke      git://github.com/koke/grit.git &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;fetch&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

koke      git://github.com/koke/grit.git &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;push&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

origin    git@github.com:mojombo/grit.git &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;fetch&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

origin    git@github.com:mojombo/grit.git &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;push&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;我们可以拉取任何一个用户的贡献。&lt;/p&gt;

&lt;h3 id=&quot;添加远程仓库&quot;&gt;添加远程仓库&lt;/h3&gt;
&lt;p&gt;运行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git remote add &amp;lt;shortname&amp;gt; &amp;lt;url&amp;gt;&lt;/code&gt; 添加一个远程仓库，同时指定一个简写：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git remote

origin

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git remote add pb https://github.com/paulboone/ticgit
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git remote &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt;

origin https://github.com/schacon/ticgit &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;fetch&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
origin https://github.com/schacon/ticgit &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;push&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
pb https://github.com/paulboone/ticgit &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;fetch&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
pb https://github.com/paulboone/ticgit &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;push&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;以后就可以使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pb&lt;/code&gt; 来代替整个 URL。如想要拉取 paulboone 的仓库，只需要输入：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git fetch pb
remote: Counting objects: 43, &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
remote: Compressing objects: 100% &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;36/36&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
remote: Total 43 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;delta 10&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, reused 31 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;delta 5&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Unpacking objects: 100% &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;43/43&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
From https://github.com/paulboone/ticgit
&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;new branch]      master     -&amp;gt; pb/master
&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;new branch]      ticgit     -&amp;gt; pb/ticgit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;然后就可以在本地通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pb/master&lt;/code&gt; 访问到了。&lt;/p&gt;

&lt;h3 id=&quot;从远程仓库中抓取与拉取&quot;&gt;从远程仓库中抓取与拉取&lt;/h3&gt;
&lt;p&gt;如上面所见，从远程仓库中获得数据，可以执行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git fetch [remote-name]&lt;/code&gt; 命令。这个命令会访问远程仓库，拉取本地没有的数据。执行完成后，可以随时合并或查看。&lt;/p&gt;

&lt;p&gt;如果是使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git clone&lt;/code&gt; 命令克隆了一个仓库，命令会自动将其添加为远程仓库并以 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;origin&lt;/code&gt; 为简写。所以 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git fetch origin&lt;/code&gt; 会抓取 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git clone&lt;/code&gt; 后（或上一次 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git fetch&lt;/code&gt; 后新推送的所有工作。&lt;/p&gt;

&lt;p&gt;需要注意的是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git fetch&lt;/code&gt; 命令只会将数据拉取到本地，但是不会自动合并或修改当前分支，需要你自己准备好的时候手动合并。&lt;/p&gt;

&lt;p&gt;如果你需要从默认远程分支上抓取并合并，可以使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git pull&lt;/code&gt; 命令。该命令自动抓取默认的远程仓库分支，并尝试合并到当前本地分支。一般情况下，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git clone&lt;/code&gt; 命令会自动设置本地 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt; 分支跟踪并克隆远程仓库的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt; 分支（或其他名字的默认分支）。&lt;/p&gt;

&lt;h3 id=&quot;推送到远程仓库&quot;&gt;推送到远程仓库&lt;/h3&gt;
&lt;p&gt;当你想要分享项目时，必须将其推送到上游，使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git push [remote-name] [branch-name]&lt;/code&gt; 命令来操作。比如当你想要将本地的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt; 分支推送到远程 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;origin&lt;/code&gt; 服务器时（这一般是克隆时命令自动设置的远程服务器名字），那么运行如下代码：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git push origin master
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;只有你拥有远程仓库的写入权限，并且之前没有人推送过时，该命令才能生效。如果在你克隆后，其他人先推送了项目到上游，此时你需要先将他们的工作拉取下来并合并到你的工作后，才能推送成功。&lt;/p&gt;

&lt;h3 id=&quot;查看远程仓库-1&quot;&gt;查看远程仓库&lt;/h3&gt;
&lt;p&gt;如果想要查看远程仓库的更多信息，可以使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git remote show [remote-name]&lt;/code&gt; 命令。如查看 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;origin&lt;/code&gt;：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git remote show origin
&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; remote origin
  Fetch URL: https://github.com/schacon/ticgit
    Push  URL: https://github.com/schacon/ticgit
    HEAD branch: master
    Remote branches:
      master                               tracked
        dev-branch                           tracked
      Local branch configured &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'git pull'&lt;/span&gt;:
      master merges with remote master
      Local ref configured &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'git push'&lt;/span&gt;:
      master pushes to master &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;up to &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;该命令会列出远程仓库的 URL 和跟踪分支的信息。该输出表示你正处于 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt; 分支（&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;HEAD branch: master&lt;/code&gt;），并且如果你运行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git pull&lt;/code&gt;，就会抓取所有远程引用，然后将远程 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt; 分支合并到本地 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt; 分支（&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master merges with remote master&lt;/code&gt;）。&lt;/p&gt;

&lt;p&gt;如果是 Git 的重度使用着，将会通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git remote show&lt;/code&gt; 看到更多信息：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git remote show origin
&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; remote origin
  URL: https://github.com/my-org/complex-project
    Fetch URL: https://github.com/my-org/complex-project
    Push  URL: https://github.com/my-org/complex-project
    HEAD branch: master
    Remote branches:
      master                           tracked
        dev-branch                       tracked
        markdown-strip                   tracked
        issue-43                         new &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;next fetch will store &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;remotes/origin&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
        issue-45                         new &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;next fetch will store &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;remotes/origin&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
        refs/remotes/origin/issue-11     stale &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;use &lt;span class=&quot;s1&quot;&gt;'git remote prune'&lt;/span&gt; to remove&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
      Local branches configured &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'git pull'&lt;/span&gt;:
      dev-branch merges with remote dev-branch
        master     merges with remote master
      Local refs configured &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'git push'&lt;/span&gt;:
      dev-branch                     pushes to dev-branch                     &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;up to &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
        markdown-strip                 pushes to markdown-strip                 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;up to &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
        master                         pushes to master                         &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;up to &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;这里输出显示了当你在特定分支上执行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git push&lt;/code&gt; 时会将本地项目推送到哪个远程分支，还列出了哪些分支不在本地，哪些远程分支已经从服务器删除，还有当你执行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git pull&lt;/code&gt; 时哪些分支会自动合并。&lt;/p&gt;

&lt;h3 id=&quot;远程仓库的移除与重命名&quot;&gt;远程仓库的移除与重命名&lt;/h3&gt;
&lt;p&gt;重命名远程引用，可以通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git remote rename&lt;/code&gt; 修改。例如将上面的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pb&lt;/code&gt; 重命名为 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;paul&lt;/code&gt; 可以通过下面命令实现：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git remote rename pb paul
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git remote
origin
paul
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;需要注意的是这也同样会修改远程分支中的名字，那些之前引用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pb/master&lt;/code&gt; 的现在会引用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;paul/master&lt;/code&gt;。&lt;/p&gt;

&lt;p&gt;如果需要移除一个远程仓库，可以使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git remote rm&lt;/code&gt; 命令：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git remote &lt;span class=&quot;nb&quot;&gt;rm &lt;/span&gt;paul
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git remote
roigin
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;打标签&quot;&gt;打标签&lt;/h2&gt;
&lt;h3 id=&quot;列出标签&quot;&gt;列出标签&lt;/h3&gt;
&lt;p&gt;使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git tag&lt;/code&gt; 命令列出标签：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git tag
v0.1
v1.3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;该命令默认以字幕顺序列出标签。&lt;/p&gt;

&lt;p&gt;你也可以使用特定的模式查找标签，如查看 Git 自身源代码仓库的 1.8.5 系列，可以运行：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git tag &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'v1.8.5*'&lt;/span&gt;
v1.8.5
v1.8.5-rc0
v1.8.5-rc1
v1.8.5-rc2
v1.8.5-rc3
v1.8.5.1
v1.8.5.2
v1.8.5.3
v1.8.5.4
v1.8.5.5

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;创建标签&quot;&gt;创建标签&lt;/h3&gt;
&lt;p&gt;Git 使用轻量标签（lightweight）与附注标签（annotated）两种标签。&lt;/p&gt;

&lt;p&gt;轻量标签很像一个不会改变的分支 - 它只是一个特定提交的引用。&lt;/p&gt;

&lt;p&gt;附注标签是存储在 Git 数据库中的一个完整对象。他们是可以被校验的，包括：打标签者的名字、电子邮件地址、日期时间、标签信息，并且可以使用 GNU Privace Guard（GPG）签名与验证。通常建议创建附注标签，这样就可以拥有以上所有信息；但如果想要临时标签，或者不想保存这些信息，轻量标签也是可以的。&lt;/p&gt;

&lt;h4 id=&quot;附注标签&quot;&gt;附注标签&lt;/h4&gt;
&lt;p&gt;在运行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git tag&lt;/code&gt; 时指定 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-a&lt;/code&gt; 选项，来创建一个附注标签：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git tag &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt; v1.4 &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'my version 1.4'&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git tag
v1.4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-a&lt;/code&gt; 选项指定了一条需要存储在标签中的信息，如果没有指定信息，Git 会通过运行编辑器来要求你输入信息。&lt;/p&gt;

&lt;p&gt;通过使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git show&lt;/code&gt; 命令可以看到标签信息和对应的提交信息：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git show v1.4
Tagger: Ben Straub &amp;lt;ben@straub.cc&amp;gt;
Date:   Sat May 3 20:19:12 2014 &lt;span class=&quot;nt&quot;&gt;-0700&lt;/span&gt;

my version 1.4

commit ca82a6dff817ec66f44342007202690a93763949
Author: Scott Chacon &amp;lt;schacon@gee-mail.com&amp;gt;
Date:   Mon Mar 17 21:52:11 2008 &lt;span class=&quot;nt&quot;&gt;-0700&lt;/span&gt;

    changed the version number
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;轻量标签&quot;&gt;轻量标签&lt;/h4&gt;
&lt;p&gt;轻量标签本质上是将提交校验和存储到一个文件中 - 没有保存任何其他信息。创建轻量标签只需要提供标签名字：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git tag v1.4-lw
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git tag
v1.4
v1.4-lw
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;这是如果在标签上运行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git show&lt;/code&gt; 将不会看到额外的信息。命令只显示提交信息：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git show v1.4-lw
commit ca82a6dff817ec66f44342007202690a93763949
Author: Scott Chacon &amp;lt;schacon@gee-mail.com&amp;gt;
Date:   Mon Mar 17 21:52:11 2008 &lt;span class=&quot;nt&quot;&gt;-0700&lt;/span&gt;

    changed the version number
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;后期打标签&quot;&gt;后期打标签&lt;/h3&gt;
&lt;p&gt;通过指定提交的校验和，来对历史提交进行打标签。&lt;/p&gt;

&lt;p&gt;比如一个这样的提交历史：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git log &lt;span class=&quot;nt&quot;&gt;--pretty-oneline&lt;/span&gt;
15027957951b64cf874c3557a0f3547bd83b3ff6 Merge branch &lt;span class=&quot;s1&quot;&gt;'experiment'&lt;/span&gt;
a6b4c97498bd301d84096da251c98a07c7723e65 beginning write support
0d52aaab4479697da7686c15f77a3d64d9165190 one more thing
9fceb02d0ae598e95dc970b74767f19372d61af8 updated rakefile
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;假设在 v1.2 时忘记打标签，也就是在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;updated rakefile&lt;/code&gt; 提交，可以在命令末尾添加校验和（或部分校验和）：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git tag &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt; v1.2 9fceb02
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git show v1.2&lt;/code&gt; 可以看到已经打上了标签：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git show v1.2
tag v1.2
Tagger: Scott Chacon &amp;lt;schacon@gee-mail.com&amp;gt;
Date:   Mon Feb 9 15:32:16 2009 &lt;span class=&quot;nt&quot;&gt;-0800&lt;/span&gt;

version 1.2
commit 9fceb02d0ae598e95dc970b74767f19372d61af8
Author: Magnus Chacon &amp;lt;mchacon@gee-mail.com&amp;gt;
Date:   Sun Apr 27 20:43:35 2008 &lt;span class=&quot;nt&quot;&gt;-0700&lt;/span&gt;

    updated rakefile
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;共享标签&quot;&gt;共享标签&lt;/h3&gt;
&lt;p&gt;默认情况下 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git push&lt;/code&gt; 命令不会推送标签到远程服务器。可以显式的将标签推送到共享服务器：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git push origin v1.5
Counting objects: 14, &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
Delta compression using up to 8 threads.
Compressing objects: 100% &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;12/12&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
Writing objects: 100% &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;14/14&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, 2.05 KiB | 0 bytes/s, &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
Total 14 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;delta 3&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, reused 0 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;delta 0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
To git@github.com:schacon/simplegit.git
&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;new tag]         v1.5 -&amp;gt; v1.5
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;如果需要一次推送多个标签，可以使用带有 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--tags&lt;/code&gt; 选项的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git push&lt;/code&gt; 命令。这将会把所有不在远程仓库服务器上的标签全部推送过去。&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git push origin &lt;span class=&quot;nt&quot;&gt;--tags&lt;/span&gt;
Counting objects: 1, &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
Writing objects: 100% &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1/1&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, 160 bytes | 0 bytes/s, &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
Total 1 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;delta 0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, reused 0 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;delta 0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
To git@github.com:schacon/simplegit.git
&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;new tag]         v1.4 -&amp;gt; v1.4
&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;new tag]         v1.4-lw -&amp;gt; v1.4-lw
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;检出标签&quot;&gt;检出标签&lt;/h3&gt;
&lt;p&gt;在 Git 中并不能真正的检出一个标签。因为标签不能像分支一样来回移动。如果需要工作目录与仓库中特定的标签版本完全一样，可以使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git checkout -b [branchname] [tagname]&lt;/code&gt; 在特定的标签上创建一个新分支：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git checkout &lt;span class=&quot;nt&quot;&gt;-b&lt;/span&gt; version2 v2.0.0
Switched to a new branch &lt;span class=&quot;s1&quot;&gt;'version2'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;当然，如果在这之后又进行了一次提交，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;version2&lt;/code&gt; 分支会因为改动向前移动，那么 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;version2&lt;/code&gt; 分支就和 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;v2.0.0&lt;/code&gt; 标签有些不同了。&lt;/p&gt;

&lt;h2 id=&quot;git-别名&quot;&gt;Git 别名&lt;/h2&gt;

&lt;p&gt;Git 并不会在你输入部分命令时自动推断你想要的命令。如果不想每次输入完整的 Git 命令，可以通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git config&lt;/code&gt; 文件来为每个命令设置一个别名。比如：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git config &lt;span class=&quot;nt&quot;&gt;--global&lt;/span&gt; alias.br branch
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;这意味着，当你需要输入 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git commit&lt;/code&gt; 命令时，只需要输入 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git ci&lt;/code&gt;。&lt;/p&gt;</content><author><name></name></author><category term="git" /><category term="github" /><category term="progit" /><category term="note" /><summary type="html">本部分涵盖 Git 使用中的各种基本命令，包括初始化仓库（repository）、开始或停止跟踪（track）文件、暂存（stage）或提交（commit）更改；配置 Git 来忽略指定的文件和文件模式、撤销错误操作、浏览项目的历史版本以及不同提交（commits）间的差异、推送（push）到远程仓库以及从远程仓库拉取（pull）文件等。</summary></entry><entry><title type="html">LEDE 旁路由 x86 固件定制记录</title><link href="http://localhost:4000/lede/openwrt/2020/07/16/LEDE-Compile-Note.html" rel="alternate" type="text/html" title="LEDE 旁路由 x86 固件定制记录" /><published>2020-07-16T07:30:32+08:00</published><updated>2020-07-16T07:30:32+08:00</updated><id>http://localhost:4000/lede/openwrt/2020/07/16/LEDE-Compile-Note</id><content type="html" xml:base="http://localhost:4000/lede/openwrt/2020/07/16/LEDE-Compile-Note.html">&lt;p&gt;在使用了几年 Linksys WRT1200AC 安装 OpenWrt 固件，用来正常上网后，这两年手头需要正常上网的设备越来越多（Netflix、Apple TV+、美区 iCloud 同步等），终于感觉网速有点不够用了，于是在 NAS 的虚拟机里安装了 LEDE 作为旁路由。在连续多次编译了 lean 大佬的 lede 固件，尝试做到了对于&lt;strong&gt;单网口旁路由&lt;/strong&gt;来说使用最佳，然后记录了更方便进行再次编译的配置方式。&lt;/p&gt;

&lt;p&gt;下面通过本地编译开始，然后转移到使用 Github Action 自动编译，做到完全伸手可得。&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;本地编译&quot;&gt;本地编译&lt;/h2&gt;
&lt;p&gt;这里先贴一下 Lean 大佬的 lede 源码仓库上说明的步骤：&lt;/p&gt;

&lt;h3 id=&quot;注意&quot;&gt;注意：&lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;不要用 root 用户 git 和编译！！！&lt;/li&gt;
  &lt;li&gt;国内用户编译前最好准备好梯子&lt;/li&gt;
  &lt;li&gt;默认登陆 IP &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.1.1&lt;/code&gt;, 密码 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;password&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;编译命令如下&quot;&gt;编译命令如下：&lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;首先装好 Ubuntu 64bit，推荐 Ubuntu 18 LTS x64&lt;/li&gt;
  &lt;li&gt;命令行输入 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sudo apt-get -y update&lt;/code&gt; 更新系统软件源，然后输入命令安装依赖：
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;build-essential asciidoc binutils bzip2 gawk gettext git libncurses5-dev libz-dev patch python3.5 python2.7 unzip zlib1g-dev lib32gcc1 libc6-dev-i386 subversion flex uglifyjs git-core gcc-multilib p7zip p7zip-full msmtp libssl-dev texinfo libglib2.0-dev xmlto qemu-utils upx libelf-dev autoconf automake libtool autopoint device-tree-compiler g++-multilib antlr3 gperf wget swig
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git clone https://github.com/coolsnowwolf/lede&lt;/code&gt; 命令下载源代码，然后 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cd lede&lt;/code&gt; 进入目录&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;进行完上面的步骤，就可以开始自定义自己需要的固件了：&lt;/strong&gt;&lt;/p&gt;

&lt;h3 id=&quot;启用-ssr-plus&quot;&gt;启用 SSR-Plus&lt;/h3&gt;
&lt;p&gt;编辑 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;./feeds.conf.default&lt;/code&gt; 文件，取消注释 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#src-git helloworld https://github.com/fw876/helloworld&lt;/code&gt;，修改完成后该文件如下：&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s&quot;&gt;src-git packages https://github.com/coolsnowwolf/packages&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;src-git luci https://github.com/coolsnowwolf/luci&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;src-git routing https://git.openwrt.org/feed/routing.git&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;src-git telephony https://git.openwrt.org/feed/telephony.git&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;src-git freifunk https://github.com/freifunk/openwrt-packages.git&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#src-git video https://github.com/openwrt/video.git&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#src-git targets https://github.com/openwrt/targets.git&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#src-git management https://github.com/openwrt-management/packages.git&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#src-git oldpackages http://git.openwrt.org/packages.git&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#src-link custom /usr/src/openwrt/custom-feed&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;src-git helloworld https://github.com/fw876/helloworld&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;修改路由器固件的初始网络配置&quot;&gt;修改路由器固件的初始网络配置&lt;/h3&gt;
&lt;p&gt;原版固件的默认登录 IP 地址为 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.1.1&lt;/code&gt;，如果刷完直接使用，一般会和家里的路由器 IP 地址冲突，这里修改一下。编辑 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;./package/lean/default-settings/files/zzz-default-settings&lt;/code&gt; 文件，在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;exit 0&lt;/code&gt; 这一行上面添加如下代码（我一般在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;uci commit system&lt;/code&gt; 这一行后面添加）：&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s&quot;&gt;uci set network.lan.ipaddr='192.168.1.254'&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;# 默认 IP 地址&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;uci set network.lan.proto='static'&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;# 静态 IP&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;uci set network.lan.type='bridge'&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;# 桥接&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;uci set network.lan.ifname='eth0'&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;# 网络端口默认 eth0&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;uci set network.lan.netmask='255.255.255.0'&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 子网掩码&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;uci set network.lan.gateway='192.168.1.1'&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;# 默认网关&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;uci set network.lan.dns='192.168.1.1'&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# 默认上游 DNS 地址&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;uci commit network&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;可选：在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;uci commit system&lt;/code&gt; 这一行上面添加 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;uci set system.@system[0].hostname=LEDE&lt;/code&gt; 来设置主机名为 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;LEDE&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;修改完成后 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;./package/lean/default-settings/files/zzz-default-settings&lt;/code&gt; 文件部分如下：&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;#!/bin/sh&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;uci set luci.main.lang=zh_cn&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;uci commit luci&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;uci set system.@system[0].timezone=CST-8&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;uci set system.@system[0].zonename=Asia/Shanghai&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;uci set system.@system[0].hostname=LEDE&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;uci commit system&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;uci set network.lan.ipaddr='192.168.1.254'&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;uci set network.lan.proto='static'&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;uci set network.lan.type='bridge'&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;uci set network.lan.ifname='eth0'&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;uci set network.lan.netmask='255.255.255.0'&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;uci set network.lan.gateway='192.168.1.1'&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;uci set network.lan.dns='192.168.1.1'&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;uci commit network&lt;/span&gt;

&lt;span class=&quot;nn&quot;&gt;...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;接着输入编译命令&quot;&gt;接着输入编译命令&lt;/h3&gt;
&lt;p&gt;更新编译源，并进入配置界面：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./scripts/feeds update &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./scripts/feeds &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;make menuconfig   &lt;span class=&quot;c&quot;&gt;# 进入配置界面&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;定制固件&quot;&gt;定制固件&lt;/h3&gt;
&lt;p&gt;这一步选择需要的插件：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;如不需要 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;automount/autosamba&lt;/code&gt; 功能（自动挂载 USB/samba 共享），需要在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Extra-packages&lt;/code&gt; 菜单中取消选择 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;automount&lt;/code&gt; 和 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;autosamba&lt;/code&gt;。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;进入 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Luci - Applications&lt;/code&gt; 选择需要的插件：&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# 我常用的几个，只做旁路由使用&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-firewall&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;# 防火墙和端口转发,必备&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-adbyby-plus&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;# 广告屏蔽大师 Plus+&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-sfe&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;# Turbo ACC 网络加速(开启 Fast Path 转发加速)&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-unblockNeteaseMusic&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;# 解锁网易云&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-ssr-plus&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# 附加应用，按需选择&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-wol&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;# 网络唤醒&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-accesscontrol&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# 上网时间控制&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-arpbind&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# IP/MAC 绑定&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-autoreboot&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# 计划重启&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-ddns&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# 动态域名解析&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-filetransfer&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# 上传 ipk 文件功能&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-frpc&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# 内网穿透 Frp&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-ipsec-vpnd&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# IPSec 服务端&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-nlbwmon&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# 网络带宽监视器&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-ramfree&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# 释放内存&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-rclone&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# rclone&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-samba&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# 网络共享（samba）&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-upnp&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# 通用即插即用 UPnP(端口自动转发)&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-vlmcsd&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# KMS 服务器（WIN 激活工具）&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-vsftpd&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# FTP 服务器&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-webadmin&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# Web 管理页面设置&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-xlnetacc&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# 迅雷下载&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-zerotier&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# 虚拟局域网&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-aria2&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# Aria2 下载&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-hd-idle&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# 硬盘休眠&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-mwan3&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# MWAN 负载均衡&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-openvpn&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# OpenVPN 客户端&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-openvpn-server&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# OpenVPN 服务端&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-pptp-server&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# PPTP 服务端&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-sqm&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# 流量智能队列管理(QOS)&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-transmission&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# BT 下载&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-usb-printer&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# USB 打印服务器&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-wireguard&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# VPN 服务器 WireGuard 状态&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;luci-app-wrtbwmon&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;# 实时流量监测&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;选择完成后 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Save&lt;/code&gt; 保存。&lt;/p&gt;

&lt;h3 id=&quot;继续编译命令&quot;&gt;继续编译命令&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;make -j8 download V=s&lt;/code&gt; 下载dl库（国内请尽量全局科学上网）&lt;/li&gt;
  &lt;li&gt;输入 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;make -j1 V=s&lt;/code&gt; （&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-j1&lt;/code&gt; 后面数字&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1&lt;/code&gt;是线程数。第一次编译推荐用单线程）进行编译你要的固件。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;编译完成后固件在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;./bin/targets/&lt;/code&gt; 文件夹内。&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&quot;使用-github-的-action-功能自动编译&quot;&gt;使用 Github 的 Action 功能自动编译&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;参考&lt;a href=&quot;https://github.com/coolsnowwolf/lede/issues/2288&quot;&gt;【教程】会本地编译的情况下，怎么用GitHub Actions云编译？&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;以 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lede&lt;/code&gt; 自带的 Action 为例来修改。文件路径为 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;./.github/workflows/openwrt-ci.yml&lt;/code&gt;。&lt;/p&gt;

&lt;h3 id=&quot;提取本地自定义插件和默认配置的差异&quot;&gt;提取本地自定义插件和默认配置的差异&lt;/h3&gt;

&lt;p&gt;在上面本地编译时，当完成“选择完成后 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Save&lt;/code&gt; 保存。”后，会生成一个 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.config&lt;/code&gt; 文件，此时运行下面命令来提取配置差异：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;make defconfig
./scripts/diffconfig.sh &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; diff.config   &lt;span class=&quot;c&quot;&gt;# 将差异保存在 diff.config 文件中&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;在-openwrt-ciyml-中添加自定义配置&quot;&gt;在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;openwrt-ci.yml&lt;/code&gt; 中添加自定义配置&lt;/h3&gt;
&lt;h4 id=&quot;启用-ssr-plus-1&quot;&gt;启用 SSR-Plus&lt;/h4&gt;

&lt;p&gt;修改 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;opennwrt-ci.yml&lt;/code&gt; 的这一部分：&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Update feeds&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;|&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;sed -i 's/\&quot;#src-git\&quot;/\&quot;src-git\&quot;/g' ./feeds.conf.default&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;./scripts/feeds update -a&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;./scripts/feeds install -a&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run: |&lt;/code&gt; 的下一行添加： &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;echo 'src-git helloworld https://github.com/fw876/helloworld' &amp;gt;&amp;gt; ./feeds.conf.default&lt;/code&gt;，添加完后配置为：&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Update feeds&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;|&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;echo 'src-git helloworld https://github.com/fw876/helloworld' &amp;gt;&amp;gt; ./feeds.conf.default&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;sed -i 's/\&quot;#src-git\&quot;/\&quot;src-git\&quot;/g' ./feeds.conf.default&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;./scripts/feeds update -a&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;./scripts/feeds install -a&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;添加自定义的插件和默认网络配置&quot;&gt;添加自定义的插件和默认网络配置&lt;/h4&gt;

&lt;p&gt;修改 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;openwrt-ci.yml&lt;/code&gt; 如下部分：&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Generate configuration file&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;make defconfig&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;将之前生成的配置差异文件 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;diff.config&lt;/code&gt; 中的内容拷贝出来，填入 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;openwrt-ci.yml&lt;/code&gt; ，并增加默认网络配置，配置后如下：&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Generate configuration file&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;|&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;rm -f ./.config*&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;touch ./.config&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;cat &amp;gt;&amp;gt; .config &amp;lt;&amp;lt;EOF&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;#&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;# ========================固件定制部分========================&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;#&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;CONFIG_TARGET_x86=y&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;CONFIG_TARGET_x86_64=y&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;CONFIG_TARGET_x86_64_DEVICE_generic=y&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;# CONFIG_PACKAGE_luci-app-accesscontrol is not set&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;# CONFIG_PACKAGE_luci-app-arpbind is not set&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;CONFIG_PACKAGE_luci-app-autoreboot=m&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;CONFIG_PACKAGE_luci-app-ddns=m&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;# CONFIG_PACKAGE_luci-app-filetransfer is not set&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;CONFIG_PACKAGE_luci-app-frpc=m&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;CONFIG_PACKAGE_luci-app-ipsec-vpnd=m&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;CONFIG_PACKAGE_luci-app-nlbwmon=m&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;CONFIG_PACKAGE_luci-app-ramfree=m&lt;/span&gt;

          &lt;span class=&quot;s&quot;&gt;...&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;# 省略一部分配置信息&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;...&lt;/span&gt;

          &lt;span class=&quot;s&quot;&gt;#&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;# ========================固件定制部分结束========================&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;#&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;EOF&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;sed -i 's/^[ \t]*//g' ./.config&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;make defconfig&lt;/span&gt;

          &lt;span class=&quot;s&quot;&gt;# 固件网络配置&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;sed -i &quot;10i # network config&quot; ./package/lean/default-settings/files/zzz-default-settings&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;# 默认 IP 地址，旁路由时不会和主路由的 192.168.1.1 冲突&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;sed -i &quot;11i uci set network.lan.ipaddr='192.168.1.5'&quot; ./package/lean/default-settings/files/zzz-default-settings&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;sed -i &quot;12i uci set network.lan.proto='static'&quot; ./package/lean/default-settings/files/zzz-default-settings&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;sed -i &quot;13i uci set network.lan.type='bridge'&quot; ./package/lean/default-settings/files/zzz-default-settings&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;sed -i &quot;14i uci set network.lan.ifname='eth0'&quot; ./package/lean/default-settings/files/zzz-default-settings&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;sed -i &quot;15i uci set network.lan.netmask='255.255.255.0'&quot; ./package/lean/default-settings/files/zzz-default-settings&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;# 主路由 IP 地址&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;sed -i &quot;16i uci set network.lan.gateway='192.168.1.1'&quot; ./package/lean/default-settings/files/zzz-default-settings&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;# 解析国内网站时，上游 DNS 服务器为主路由器&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;sed -i &quot;17i uci set network.lan.dns='192.168.1.1'&quot; ./package/lean/default-settings/files/zzz-default-settings&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;sed -i &quot;18i uci commit network\n&quot; ./package/lean/default-settings/files/zzz-default-settings&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;开机后的旁路由设置&quot;&gt;开机后的旁路由设置&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;接口 IP 地址改静态，和主路由同一个网段&lt;/li&gt;
  &lt;li&gt;接口的 IPv4 网关为主路由网关&lt;/li&gt;
  &lt;li&gt;接口的 DNS 地址为主路由地址，也可以为自定义 DNS 地址&lt;/li&gt;
  &lt;li&gt;接口的 DHCP 设置为&lt;strong&gt;忽略此接口&lt;/strong&gt;（DHCP 由主路由来分配）&lt;/li&gt;
  &lt;li&gt;设置相关插件（SSR Plus，广告屏蔽大师 Plus 等）&lt;/li&gt;
&lt;/ol&gt;</content><author><name></name></author><category term="lede" /><category term="openwrt" /><summary type="html">在使用了几年 Linksys WRT1200AC 安装 OpenWrt 固件，用来正常上网后，这两年手头需要正常上网的设备越来越多（Netflix、Apple TV+、美区 iCloud 同步等），终于感觉网速有点不够用了，于是在 NAS 的虚拟机里安装了 LEDE 作为旁路由。在连续多次编译了 lean 大佬的 lede 固件，尝试做到了对于单网口旁路由来说使用最佳，然后记录了更方便进行再次编译的配置方式。</summary></entry><entry><title type="html">progit 笔记 01</title><link href="http://localhost:4000/git/github/progit/note/2020/06/25/ProGit-note-01.html" rel="alternate" type="text/html" title="progit 笔记 01" /><published>2020-06-25T19:11:36+08:00</published><updated>2020-06-25T19:11:36+08:00</updated><id>http://localhost:4000/git/github/progit/note/2020/06/25/ProGit-note-01</id><content type="html" xml:base="http://localhost:4000/git/github/progit/note/2020/06/25/ProGit-note-01.html">&lt;p&gt;本部分主要介绍了 Git 的逻辑、特点、处理文件的方式、工作流程以及基本的配置。&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;git-基础&quot;&gt;Git 基础&lt;/h2&gt;
&lt;h3 id=&quot;git-直接记录快照而非差异比较&quot;&gt;Git 直接记录快照（而非差异比较&lt;/h3&gt;
&lt;p&gt;每次提交更新，或在 Git 中保存项目状态时，Git 对当时的全部文件制作一个快照并保存这个快照的索引。如果文件没有修改，Git 将不再重新存储该文件，而是保留一个指向之前存储的文件的链接。Git 对待数据更像是一个&lt;strong&gt;快照流&lt;/strong&gt;&lt;/p&gt;

&lt;h3 id=&quot;近乎所有操作都是本地执行&quot;&gt;近乎所有操作都是本地执行&lt;/h3&gt;
&lt;p&gt;Git 的绝大多数操作都只需要访问本地文件和资源，本地磁盘上有项目的的完整历史。如果想要查看当前版本和一个月前的版本之间的修改，Git 会查找一个月前的文件做一次本地的差异计算，而不是由远程服务器处理。&lt;/p&gt;

&lt;h3 id=&quot;git-保证完整性&quot;&gt;Git 保证完整性&lt;/h3&gt;
&lt;p&gt;Git 中的所有数据在存储前都计算校验和，然后以校验和来引用。Git 使用 SHA-1 散列（hash，哈希）作为计算校验和的机制。Git 数据库中保存的信息都是以文件内容的哈希值来索引，而不是文件名。&lt;/p&gt;

&lt;h3 id=&quot;git-一般只添加数据&quot;&gt;Git 一般只添加数据&lt;/h3&gt;
&lt;p&gt;Git 操作一般只往 Git 数据库中增加数据，很难让 Git 执行任何不可逆操作，或者清除数据。&lt;/p&gt;

&lt;h3 id=&quot;git-的三种状态&quot;&gt;Git 的三种状态&lt;/h3&gt;
&lt;p&gt;Git 有三种状态：已提交（committed）、已修改（modified）、和已暂存（staged）。&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;committed: 表示数据已经安全的保存在本地数据库中&lt;/li&gt;
  &lt;li&gt;modified: 表示修改了文件，但还没有保存到数据库中&lt;/li&gt;
  &lt;li&gt;staged: 表示对一个已修改的文件的当前版本做了标记，使之包含在下次提交的快照中&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Git 项目的三个工作区域：Git 仓库、工作目录以及暂存区域。&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Git 仓库目录是 Git 用来保存项目的元数据和对象数据库的地方。从其他计算机克隆仓库时，拷贝的就是这里的数据&lt;/li&gt;
  &lt;li&gt;工作目录是对项目的某个版本独立提取出来的内容，从 Git 仓库的压缩数据库中提取出来的文件，放在磁盘上供使用或修改&lt;/li&gt;
  &lt;li&gt;暂存区域是一个文件，保存了下次将提交的文件列表信息，一般在 Git 仓库目录中。有时也被称作“索引”&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200625111105.jpeg&quot; alt=&quot;Figure 1-6.jpeg&quot; /&gt;&lt;/p&gt;

&lt;p&gt;基本的 Git 工作流程：&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;在工作目录中修改文件&lt;/li&gt;
  &lt;li&gt;暂存文件，将文件的快照放入暂存区域&lt;/li&gt;
  &lt;li&gt;提交更新，找到暂存区域的文件，将快照永久性存储到 Git 仓库目录&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;初次运行-git-前的配置&quot;&gt;初次运行 Git 前的配置&lt;/h2&gt;
&lt;p&gt;Git 自带一个 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git config&lt;/code&gt; 的工具来帮助控制 Git 的外观和行为的配置变量，这些变量存储在三个不同的位置：&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/gitconfig&lt;/code&gt; 文件：包含系统上每一个用户以及他们仓库的通用配置。如果使用带有 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--system&lt;/code&gt; 选项的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git config&lt;/code&gt; 时，它会从此文件读写配置变量&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.gitconfig&lt;/code&gt; 或 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.config/git/config&lt;/code&gt; 文件：指针对当前用户。可以传递 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--global&lt;/code&gt; 选项让 Git 读写此文件&lt;/li&gt;
  &lt;li&gt;当前使用仓库的 Git 目录中的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config&lt;/code&gt; 文件（就是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.git/config&lt;/code&gt;）：针对该仓库&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;用户信息&quot;&gt;用户信息&lt;/h3&gt;
&lt;p&gt;安装完成 Git 后做的第一件事就是设置用户名称与邮件地址。每一次 Git 提交都会使用这些信息，并且会写入到每一次提交中，不可更改。&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git config &lt;span class=&quot;nt&quot;&gt;--global&lt;/span&gt; user.name &lt;span class=&quot;s2&quot;&gt;&quot;John Doe&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git config &lt;span class=&quot;nt&quot;&gt;--global&lt;/span&gt; user.email johndoe@example.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;如果使用了 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--global&lt;/code&gt; 选项，那么命令只需要运行一次，以后 Git 都会使用这些信息。如果需要针对项目使用不同的用户名称与邮件地址，可以在项目目录下运行没有 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--global&lt;/code&gt; 选项的命令来配置。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;文本编辑器&quot;&gt;文本编辑器&lt;/h3&gt;
&lt;p&gt;配置默认文本编辑器，Git 需要输入信息时会调用它。如果未配置，Git 会使用操作系统默认的文本编辑器，通常是 Vim。如果想使用 Emacs：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git config &lt;span class=&quot;nt&quot;&gt;--global&lt;/span&gt; core.editor emacs
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;检查配置信息&quot;&gt;检查配置信息&lt;/h3&gt;
&lt;p&gt;如果想要检查配置信息，可以使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git config --list&lt;/code&gt; 命令来列出所有 Git 当时能找到的配置。&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git config &lt;span class=&quot;nt&quot;&gt;--list&lt;/span&gt;
user.name&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;John Doe

user.email&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;johndoe@example.com

color.status&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;auto

color.branch&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;auto

color.interactive&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;auto

color.diff&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;auto

...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;可能会出现重复的变量名，因为 Git 会从不同的文件中读取同一个配置（例如从 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/tec/gitconfig&lt;/code&gt; 与 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.gitconfig&lt;/code&gt;）。这时 Git 会使用它找到的每一个变量的最后一个配置。&lt;/p&gt;

&lt;p&gt;可以通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git config &amp;lt;key&amp;gt;&lt;/code&gt; 来检查 Git 的某一想配置&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git config user.name
John Doe
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;获取帮助&quot;&gt;获取帮助&lt;/h2&gt;
&lt;p&gt;有三种方法找到 Git 命令的使用手册：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git &lt;span class=&quot;nb&quot;&gt;help&lt;/span&gt; &amp;lt;verb&amp;gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git &amp;lt;verb&amp;gt; &lt;span class=&quot;nt&quot;&gt;--help&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;man git-&amp;lt;verb&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;例如获取 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config&lt;/code&gt; 命令的帮助手册&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git &lt;span class=&quot;nb&quot;&gt;help &lt;/span&gt;config
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name></name></author><category term="git" /><category term="github" /><category term="progit" /><category term="note" /><summary type="html">本部分主要介绍了 Git 的逻辑、特点、处理文件的方式、工作流程以及基本的配置。</summary></entry><entry><title type="html">捡垃圾的快乐 - Aruba AP（瘦AP）刷机变家用 IAP（胖AP）</title><link href="http://localhost:4000/aruba/ap/2020/06/19/aruba-fit-ap-upgrade-to-fat-ap.html" rel="alternate" type="text/html" title="捡垃圾的快乐 - Aruba AP（瘦AP）刷机变家用 IAP（胖AP）" /><published>2020-06-19T01:59:00+08:00</published><updated>2020-06-19T01:59:00+08:00</updated><id>http://localhost:4000/aruba/ap/2020/06/19/aruba-fit-ap-upgrade-to-fat-ap</id><content type="html" xml:base="http://localhost:4000/aruba/ap/2020/06/19/aruba-fit-ap-upgrade-to-fat-ap.html">&lt;p&gt;由于现在无线设备越来越多，同时需要兼顾看电影、打游戏、办公、智能家居、NAS 下载等，所以感觉现有的无线路由器有点力不从心，就咸鱼 200 块淘了一个 Aruba 的 AP-203R，希望 MU-MIMO 能带来更好的体验。然后淘回来发现是个没办法单独使用的瘦 AP，查找了一番资料，发现可以刷机变成胖 AP 单独使用，这里做个记录。&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;购买一条-ttl-线&quot;&gt;购买一条 TTL 线&lt;/h2&gt;

&lt;p&gt;查看 aruba 官网相应版本的说明书（&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;AP-XXX_Install_Guide.pdf&lt;/code&gt;），找到相应的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Console Port&lt;/code&gt; 说明信息，再查找推荐的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;AP-CBL-SERU cable&lt;/code&gt; 信息，根据文档里的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CONNECTOR&lt;/code&gt; 去淘宝找相应的型号，根据文档提供的线序购买。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200618174916.jpg&quot; alt=&quot;查询 Installation Guide&quot; /&gt;
&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200618175122.jpg&quot; alt=&quot;查看 Console Port 支持的线缆&quot; /&gt;
&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200618175155.jpg&quot; alt=&quot;查询相关线缆&quot; /&gt;
&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200618175252.jpg&quot; alt=&quot;查看线缆线序和新片&quot; /&gt;
&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200618175301.jpeg&quot; alt=&quot;购买 Console 线&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;准备软件和资料&quot;&gt;准备软件和资料&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Serial（串口）连接软件（Windows: &lt;a href=&quot;https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html&quot;&gt;Putty&lt;/a&gt;; macOS: &lt;a href=&quot;https://www.decisivetactics.com/products/serial/&quot;&gt;Serial.app&lt;/a&gt;）&lt;/li&gt;
  &lt;li&gt;TFTP Server 软件（Windows: &lt;a href=&quot;https://www.solarwinds.com/free-tools/free-tftp-server&quot;&gt;SolarWinds TFTP Server&lt;/a&gt;; macOS: 自带 TFTP Server）&lt;/li&gt;
  &lt;li&gt;需要刷入 AP 的系统固件（如 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ArubaInstant_Vela_8.5.0.3_72498&lt;/code&gt;，以及&lt;a href=&quot;https://support.arubanetworks.com/Documentation/tabid/77/DMXModule/512/Default.aspx?EntryId=8868&quot;&gt;其他固件&lt;/a&gt;）
    &lt;ul&gt;
      &lt;li&gt;将固件移动到 TFTP Server 的根目录下，如 SolarWinds TFTP Server 的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;C:\TFTP-Root&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;重要&lt;/strong&gt;：关闭电脑防火墙&lt;/li&gt;
  &lt;li&gt;启动 SolarWinds TFTP Server ，显示如下：
  &lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200618175437.jpg&quot; alt=&quot;SolarWinds TFTP Server&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;启动-ap&quot;&gt;启动 AP&lt;/h2&gt;

&lt;p&gt;（使用的软件以 Windows 平台为例）首先断开 AP 的电源，把 AP 通过串口连接到电脑上，等待提示驱动安装成功后，打开 Putty，选择连接方式为 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Serial&lt;/code&gt;，按照&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;开始菜单（右键） - 设备管理器&lt;/code&gt;中显示的串口号，选择连接的串口，如 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;COM1&lt;/code&gt;，点击 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Open&lt;/code&gt; 打开：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/2020/06/DeviceMgr.jpg&quot; alt=&quot;查看设备的串口号&quot; /&gt;
&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200618175335.jpg&quot; alt=&quot;Putty 配置&quot; /&gt;&lt;/p&gt;

&lt;p&gt;然后把 AP 接上电源，等待窗口中出现如下字符：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Hit &amp;lt;Enter&amp;gt; to stop autoboot:  5
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;立即按回车，进入 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apboot&lt;/code&gt; 模式：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;apboot&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;配置网络&quot;&gt;配置网络&lt;/h2&gt;

&lt;p&gt;将 AP 通过网线连接到电脑，在电脑上设置相关接口为固定 IP 地址，如 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.2.10&lt;/code&gt;：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200618175402.jpg&quot; alt=&quot;和 AP 连接的网卡 IP 配置&quot; /&gt;&lt;/p&gt;

&lt;p&gt;然后开始设置 AP 的地址和 TFTP 服务器&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;apboot&amp;gt; setenv ipaddr 192.168.2.20  &lt;span class=&quot;c&quot;&gt;# 配置 AP 的 IP 地址&lt;/span&gt;
apboot&amp;gt; setenv netmask 255.255.255.0    &lt;span class=&quot;c&quot;&gt;# 配置 AP 的子网掩码&lt;/span&gt;
apboot&amp;gt; setenv serverip 192.168.2.10    &lt;span class=&quot;c&quot;&gt;# 配置 TFTP 服务器地址，即电脑的 IP 地址&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;开始给-ap-刷入新固件&quot;&gt;开始给 AP 刷入新固件&lt;/h2&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;apboot&amp;gt; osinfo  &lt;span class=&quot;c&quot;&gt;# 显示系统中的固件&lt;/span&gt;
Partition 0:
    image &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;: 0
  machine &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;: 46
          size: 13864872
       version: 6.5.2.0-6.5.2.0
  build string: ArubaOS version 6.5.2.0-6.5.2.0 &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;Vela &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;p4build@pr-hpn-build01&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;gcc version 4.7.2&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#59123 Fri Apr 7 09:37:25 AST 2017&lt;/span&gt;
         flags: Instant preserve
           oem: aruba

Image is signed&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; verifying checksum... passed
SHA2 Signature available
Signer Cert OK
Policy Cert OK
RSA signature verified using SHA2.

Partition 1:
    image &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;: 0
  machine &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;: 46
          size: 13864872
       version: 6.5.2.0-6.5.2.0
  build string: ArubaOS version 6.5.2.0-6.5.2.0 &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;Vela &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;p4build@pr-hpn-build01&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;gcc version 4.7.2&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#59123 Fri Apr 7 09:37:25 AST 2017&lt;/span&gt;
         flags: Instant preserve
           oem: aruba

Image is signed&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; verifying checksum... passed
SHA2 Signature available
Signer Cert OK
Policy Cert OK
RSA signature verified using SHA2.

apboot&amp;gt; clear os 0  &lt;span class=&quot;c&quot;&gt;# 清除分区 0 的系统&lt;/span&gt;
apboot&amp;gt; upgrade os 0 ArubaInstant_Vela_8.5.0.3_72498    &lt;span class=&quot;c&quot;&gt;# os 0 分区刷入 TFTP Server 中的 ArubaInstant_Vela_8.5.0.3_72498 固件&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 当看到 Upgrade successful 表示刷入成功&lt;/span&gt;

apboot&amp;gt; factory_reset   &lt;span class=&quot;c&quot;&gt;# ！重要：清除原来的配置&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;建议将两个分区刷入同样的固件。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;配置-iap&quot;&gt;配置 IAP&lt;/h2&gt;

&lt;p&gt;等待 5 分钟左右，会出现一个 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SetMeUp-XX:XX:XX&lt;/code&gt; 类似的名字的 Wi-Fi 信号，就是刷新后的 Aruba IAP 的初始网络。&lt;/p&gt;

&lt;p&gt;连接上去后，打开浏览器，输入网址 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://setmeup.arubanetworks.com:4343/&lt;/code&gt; （有可能浏览器会提示此网站证书不受信任，直接点仍然继续访问）进入 web 设置界面，使用账号 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;admin&lt;/code&gt; 和密码 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;机器的 SN 号&lt;/code&gt; 登陆（8.5 以下系统是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;admin/admin&lt;/code&gt;，开始和普通无线路由器一样设置网络。&lt;/p&gt;

&lt;p&gt;需要配置的地方为：&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;配置 - 接入点：设置 AP 的接入方式，如连接主路由，只需要在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;常规&lt;/code&gt;选项中选择 DHCP 即可&lt;/li&gt;
  &lt;li&gt;配置 - 网络：设置 Wi-Fi，新建即可，在高级选项中可以选择 2.4G 或 5G 网络，是否隐藏 SSID，加密方式等&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;设置完毕，将 AP 连接到路由器上就可以正常使用了。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200618175509.jpg&quot; alt=&quot;Overview&quot; /&gt;&lt;/p&gt;</content><author><name></name></author><category term="aruba" /><category term="ap" /><summary type="html">由于现在无线设备越来越多，同时需要兼顾看电影、打游戏、办公、智能家居、NAS 下载等，所以感觉现有的无线路由器有点力不从心，就咸鱼 200 块淘了一个 Aruba 的 AP-203R，希望 MU-MIMO 能带来更好的体验。然后淘回来发现是个没办法单独使用的瘦 AP，查找了一番资料，发现可以刷机变成胖 AP 单独使用，这里做个记录。</summary></entry><entry><title type="html">查找并清理 CentOS 的存储空间</title><link href="http://localhost:4000/centos/vps/linux/2020/06/12/clean-up-storage-for-vps.html" rel="alternate" type="text/html" title="查找并清理 CentOS 的存储空间" /><published>2020-06-12T19:41:04+08:00</published><updated>2020-06-12T19:41:04+08:00</updated><id>http://localhost:4000/centos/vps/linux/2020/06/12/clean-up-storage-for-vps</id><content type="html" xml:base="http://localhost:4000/centos/vps/linux/2020/06/12/clean-up-storage-for-vps.html">&lt;p&gt;最近 VPS 磁盘空间一直警告不够用，就想看一下哪个文件占用空间比较大，删掉一些不用的大文件，腾出可用空间来。&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;以下是记录。&lt;/p&gt;

&lt;h2 id=&quot;查看磁盘空间使用量&quot;&gt;查看磁盘空间使用量&lt;/h2&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;df&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt;
Filesystem           Size  Used Avail Use% Mounted on
devtmpfs             394M     0  394M   0% /dev
tmpfs                411M     0  411M   0% /dev/shm
tmpfs                411M   42M  369M  11% /run
tmpfs                411M     0  411M   0% /sys/fs/cgroup
/dev/mapper/cl-root   50G  2.3G   48G   5% /
/dev/mapper/cl-home   47G  367M   47G   1% /home
/dev/vda1            976M  175M  735M  20% /boot
tmpfs                 83M     0   83M   0% /run/user/0
tmpfs                 83M     0   83M   0% /run/user/1000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;排查大文件所在目录&quot;&gt;排查大文件所在目录&lt;/h2&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;du&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-sh&lt;/span&gt; .[!.]&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# 查看当前目录下子目录大小（du: disk usage）;-s: 显示总和；-h: 易读模式&lt;/span&gt;
4.0K	.bash_history
4.0K	.bash_logout
4.0K	.bash_profile
4.0K	.bashrc
4.0K	.ssh
4.0K	.wget-hsts

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;du&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-sh&lt;/span&gt; /usr/[!.]&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# 查看 /usr/ 目录下各个子目录大小&lt;/span&gt;
202M	/usr/bin
0	/usr/games
84K	/usr/include
614M	/usr/lib
270M	/usr/lib64
84M	/usr/libexec
4.0K	/usr/local
64M	/usr/sbin
374M	/usr/share
0	/usr/src
0	/usr/tmp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;查看大文件&quot;&gt;查看大文件&lt;/h2&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-laShs&lt;/span&gt;
total 20K
4.0K &lt;span class=&quot;nt&quot;&gt;-rw-------&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; 1 groot groot 2.8K Jun 11 17:10 .bash_history
4.0K &lt;span class=&quot;nt&quot;&gt;-rw-r--r--&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; 1 groot groot  312 Nov  9  2019 .bashrc
4.0K &lt;span class=&quot;nt&quot;&gt;-rw-rw-r--&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; 1 groot groot  204 Jun 12 13:32 .wget-hsts
4.0K &lt;span class=&quot;nt&quot;&gt;-rw-r--r--&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; 1 groot groot  141 Nov  9  2019 .bash_profile
4.0K &lt;span class=&quot;nt&quot;&gt;-rw-r--r--&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; 1 groot groot   18 Nov  9  2019 .bash_logout
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;查看已标记为删除的文件占用的空间&quot;&gt;查看已标记为删除的文件占用的空间&lt;/h2&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;lsof &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;deleted
systemd-j   619                           root  txt       REG              253,0   234488     650779 /usr/lib/systemd/systemd-journald &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;deleted&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
qemu-ga     843                           root  txt       REG              253,0   449064    1079814 /usr/bin/qemu-ga &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;deleted&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
systemd-l   873                           root  txt       REG              253,0   481696     650781 /usr/lib/systemd/systemd-logind &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;deleted&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
NetworkMa   891                           root  txt       REG              253,0  7350304   34213286 /usr/sbin/NetworkManager &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;deleted&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
NetworkMa   891   902 gmain               root  txt       REG              253,0  7350304   34213286 /usr/sbin/NetworkManager &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;deleted&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
NetworkMa   891   903 gdbus               root  txt       REG              253,0  7350304   34213286 /usr/sbin/NetworkManager &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;deleted&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;释放空间已删除文件所占空间&quot;&gt;释放空间已删除文件所占空间&lt;/h2&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;kill&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-9&lt;/span&gt; %PID% &lt;span class=&quot;c&quot;&gt;# 结束相应的进程&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;https://blog.csdn.net/lk_db/article/details/78341698&lt;/p&gt;

  &lt;p&gt;https://jaminzhang.github.io/os/File-Deleted-And-Still-Use-The-Filesystem-Space-Problem-In-Linux/&lt;/p&gt;

  &lt;p&gt;http://blog.kankanan.com/article/63a75236-pm2-768465e55fd765874ef659275c0f.html&lt;/p&gt;

  &lt;p&gt;http://einverne.github.io/post/2018/03/du-find-out-which-fold-take-space.html&lt;/p&gt;
&lt;/blockquote&gt;</content><author><name></name></author><category term="centos" /><category term="vps" /><category term="linux" /><summary type="html">最近 VPS 磁盘空间一直警告不够用，就想看一下哪个文件占用空间比较大，删掉一些不用的大文件，腾出可用空间来。</summary></entry><entry><title type="html">CentOS VPS 安全加固</title><link href="http://localhost:4000/centos/vps/2020/06/09/secure-your-centos-vps.html" rel="alternate" type="text/html" title="CentOS VPS 安全加固" /><published>2020-06-09T18:24:13+08:00</published><updated>2020-06-09T18:24:13+08:00</updated><id>http://localhost:4000/centos/vps/2020/06/09/secure-your-centos-vps</id><content type="html" xml:base="http://localhost:4000/centos/vps/2020/06/09/secure-your-centos-vps.html">&lt;p&gt;由于正常上网和经常产生新的 idea 需要，手上的 VPS 越来越多，每次都要对新 VPS 进行安全加固，防止被黑。顺便记录常用加固项。&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;添加-alias-信息&quot;&gt;添加 alias 信息&lt;/h2&gt;
&lt;p&gt;编辑本地 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.ssh/config&lt;/code&gt; 文件，添加 VPS 的 alias 信息，方便以后通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ssh alias-name&lt;/code&gt; 连接 VPS。&lt;/p&gt;

&lt;p&gt;以 masOS 为例，首先打开 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.ssh/config&lt;/code&gt; 文件：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;vi ~/.ssh/config
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;然后将自己的 VPS 信息填写进去，格式如下：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Host alias-name	&lt;span class=&quot;c&quot;&gt;# 自定义的主机昵称&lt;/span&gt;
   HostName ip_address	&lt;span class=&quot;c&quot;&gt;# VPS 主机地址&lt;/span&gt;
   Port port_number	&lt;span class=&quot;c&quot;&gt;# 端口号&lt;/span&gt;
   User user	&lt;span class=&quot;c&quot;&gt;# 登陆用户名&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;如果记不住那么多机器的 alias ，可以写个脚本命令列出已经添加的配置，例如 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sshl&lt;/code&gt; ，每次需要的显示一下敲一下就 OK 了。&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;alias &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;sshl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'cat ~/.ssh/config | grep &quot;Host &quot;'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;安装-ntp-服务&quot;&gt;安装 NTP 服务&lt;/h2&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;yum &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;ntp ntpdate	&lt;span class=&quot;c&quot;&gt;# 安装 ntp 服务&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;chkconfig ntpd on	&lt;span class=&quot;c&quot;&gt;# 开机自动启动&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ntpdate pool.ntp.org	&lt;span class=&quot;c&quot;&gt;# 添加 ntp 服务器&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;systemctl start ntpd	&lt;span class=&quot;c&quot;&gt;# 启动 ntp 服务&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;centos-8-使用-chrony&quot;&gt;CentOS 8 使用 chrony&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;yum &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;chrony
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;systemctl start chronyd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;在登陆时提示上次登录失败的信息&quot;&gt;在登陆时提示上次登录失败的信息&lt;/h2&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;vim /etc/pam.d/systemd-user
&lt;span class=&quot;c&quot;&gt;# 将下面这一行复制进去&lt;/span&gt;
session required pam_lastlog.so showfailed
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;设置每个会话最大密码尝试次数&quot;&gt;设置每个会话最大密码尝试次数&lt;/h2&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;vim  /etc/pam.d/systemd-user
&lt;span class=&quot;c&quot;&gt;# 将下面这一行复制进去&lt;/span&gt;
auth pam_pwquality.so  &lt;span class=&quot;nv&quot;&gt;retry&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;阻止错误密码尝试&quot;&gt;阻止错误密码尝试&lt;/h2&gt;
&lt;p&gt;编辑 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/pam.d/system-auth&lt;/code&gt; 和 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/pam.d/password-auth&lt;/code&gt; 两个 PAM 配置文件（尝试3次错误锁定20分钟），添加下面两行进去&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;auth &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;die] pam_faillock.so authfail &lt;span class=&quot;nv&quot;&gt;deny&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;3 &lt;span class=&quot;nv&quot;&gt;unlock_time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1200 &lt;span class=&quot;nv&quot;&gt;fail_interval&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;900
auth required pam_faillock.so authsucc &lt;span class=&quot;nv&quot;&gt;deny&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;3 &lt;span class=&quot;nv&quot;&gt;unlock_time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1200 &lt;span class=&quot;nv&quot;&gt;fail_interval&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;900
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;限制密码重用&quot;&gt;限制密码重用&lt;/h2&gt;
&lt;p&gt;使用 PAM 模块配置，在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/pam.d/system-auth&lt;/code&gt; 这个 PAM 配置文件里面，在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pam_unix.so&lt;/code&gt; 所在的行添加 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;remember=24&lt;/code&gt; 。这样服务器就会记录历史上的前 24 个旧密码，为啥为 24？因为这是美国国防部的标准。&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;password sufficient  pam_unix.so existing_options  &lt;span class=&quot;nv&quot;&gt;remember&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;24
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;设置-bootgrub2grubcfg-权限&quot;&gt;设置 /boot/grub2/grub.cfg 权限&lt;/h2&gt;
&lt;p&gt;设置 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/boot/grub2/grub.cfg&lt;/code&gt; 的权限为 600&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo chmod &lt;/span&gt;600 /boot/grub2/grub.cfg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;创建具有-sudo-权限的普通用户&quot;&gt;创建具有 sudo 权限的普通用户&lt;/h2&gt;
&lt;h3 id=&quot;创建一个新用户&quot;&gt;创建一个新用户&lt;/h3&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;adduser demo
passwd demo
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h3 id=&quot;查看当前活跃用户&quot;&gt;查看当前活跃用户&lt;/h3&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;w
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h3 id=&quot;查看用户列表&quot;&gt;查看用户列表&lt;/h3&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; /etc/passwd|grep &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; nologin|grep &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; halt|grep &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; shutdown|awk &lt;span class=&quot;nt&quot;&gt;-F&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;:&quot;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'{ print $1&quot;|&quot;$3&quot;|&quot;$4 }'&lt;/span&gt;|more
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h3 id=&quot;给新用户-sudo-权限&quot;&gt;给新用户 sudo 权限&lt;/h3&gt;
&lt;p&gt;现在，我们有了普通用户，进行普通的操作，但是有时，我们需要更大的权限进行操作，如 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;yum update&lt;/code&gt;，进行这样的操作，我们一般不会使用 root 登进登录，一般使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sudo&lt;/code&gt; （Super User do）命令。&lt;/p&gt;

&lt;p&gt;为了将 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sudo&lt;/code&gt; 权限给普通用户，我们需要将新用户加入 wheel 组中，CentOS 默认的 wheel 组有运行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sudo&lt;/code&gt; 的权限。&lt;/p&gt;

&lt;p&gt;我们使用 root 用户，将 demo 用户加入到 wheel 组中。&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gpasswd &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt; demo wheel
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;配置-ssh-服务&quot;&gt;配置 SSH 服务&lt;/h2&gt;
&lt;p&gt;我们添加了普通用户，也可以执行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sudo&lt;/code&gt; 命令，需要配置 ssh 服务，去掉 root 用户的远程登录，这样更加安全。&lt;/p&gt;

&lt;h3 id=&quot;登录到服务器&quot;&gt;登录到服务器&lt;/h3&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ssh demo@SERVER_IP_ADDRESS
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h3 id=&quot;进行配置&quot;&gt;进行配置&lt;/h3&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;vi /etc/ssh/sshd_config
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;将&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#PermitRootLogin yes&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;改为&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;PermitRootLogin no
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:wq&lt;/code&gt; 保存并退出。&lt;/p&gt;
&lt;h3 id=&quot;重启-ssh-服务&quot;&gt;重启 ssh 服务&lt;/h3&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;systemctl reload sshd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;这样，服务器的 root 用户就被禁止了远程登录。&lt;/p&gt;

&lt;h3 id=&quot;修改端口&quot;&gt;修改端口&lt;/h3&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;vi /etc/ssh/sshd_config
Port &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h3 id=&quot;禁止空密码登录&quot;&gt;禁止空密码登录&lt;/h3&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;vim /etc/ssh/sshd_config:

PermitEmptyPasswords no
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h3 id=&quot;只允许-ssh-proto-2&quot;&gt;只允许 ssh proto 2&lt;/h3&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;vim /etc/ssh/sshd_config

Protocol 2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name></name></author><category term="centos" /><category term="vps" /><summary type="html">由于正常上网和经常产生新的 idea 需要，手上的 VPS 越来越多，每次都要对新 VPS 进行安全加固，防止被黑。顺便记录常用加固项。</summary></entry><entry><title type="html">修复 QNAP NAS 特殊情况下 DDNS 服务识别外部 IP 错误的问题</title><link href="http://localhost:4000/nas/qnap/2020/03/23/fix-the-qnap-incorrect-ddns-ip-detect.html" rel="alternate" type="text/html" title="修复 QNAP NAS 特殊情况下 DDNS 服务识别外部 IP 错误的问题" /><published>2020-03-23T00:19:54+08:00</published><updated>2020-03-23T00:19:54+08:00</updated><id>http://localhost:4000/nas/qnap/2020/03/23/fix-the-qnap-incorrect-ddns-ip-detect</id><content type="html" xml:base="http://localhost:4000/nas/qnap/2020/03/23/fix-the-qnap-incorrect-ddns-ip-detect.html">&lt;blockquote&gt;
  &lt;p&gt;当 QNAP NAS 设备接入的网络配置了自动翻墙的话，在 QNAP NAS 的 &lt;strong&gt;myQNAPcloud&lt;/strong&gt; 应用中，&lt;strong&gt;My DDNS&lt;/strong&gt; 功能就有可能将 IPv4 地址识别为翻墙的代理 IP 地址，从而无法通过系统设置的 DDNS 功能从自定义的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*.myqnapcloud.com&lt;/code&gt; 域名远程访问 NAS。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;1-家庭网络拓扑图家庭中的-nas-是怎么连接到互联网的&quot;&gt;1. 家庭网络拓扑图（家庭中的 NAS 是怎么连接到互联网的）&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200322162710.png&quot; alt=&quot;&quot; /&gt;
其中入口路由器和无线路由器可以是同一个，即家庭中的 PPPOE 拨号上网和无线 WiFi 路由器；或者可以是多个，比如旁路翻墙的设备等。&lt;/p&gt;

&lt;h2 id=&quot;2-ddns-ip-更新错误的问题可能导致无法通过自定义的-myqnapcloudcom-域名访问-nas&quot;&gt;2. DDNS IP 更新错误的问题（可能导致无法通过自定义的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\*.myqnapcloud.com&lt;/code&gt; 域名访问 NAS）&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200322163320.png&quot; alt=&quot;&quot; /&gt;
如图，DDNS IP 可能被识别为翻墙服务的 IP 地址，而不是实际的宽带外网地址。&lt;/p&gt;

&lt;h2 id=&quot;3-原因分析并修复&quot;&gt;3. 原因分析并修复&lt;/h2&gt;

&lt;p&gt;在 QNAP 系统的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/init.d/&lt;/code&gt; 目录下有一个 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;get_external_ip.sh&lt;/code&gt; 的脚本，该脚本的内容为：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/bash&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Script for getting an external WAN IP&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# get external IP from qcloud API&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;WAN_IP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;/usr/local/bin/qcloud_cli &lt;span class=&quot;nt&quot;&gt;-x&lt;/span&gt; 13 &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-z&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$WAN_IP&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;exit &lt;/span&gt;1
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$WAN_IP&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;exit &lt;/span&gt;0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;可以看到获取 WAN_IP 也就是宽带外网 IP 是通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/bin/qcloud_cli -x 13 -e&lt;/code&gt; 来实现的，通过追踪该可执行文件，发现该文件通过解析 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;edge.api.myqnapcloud.com&lt;/code&gt; 这个域名并访问，来获取外部 IP 地址的。&lt;/p&gt;

&lt;h3 id=&quot;31-修复问题&quot;&gt;3.1 修复问题&lt;/h3&gt;
&lt;p&gt;在正常上网服务的配置里添加例外即可。&lt;/p&gt;

&lt;p&gt;如在路由器固件为 OPENWRT/LEDE 的路由器上使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ShadowSocksR Plus+&lt;/code&gt; 实现的，可以将 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;edge.api.myqnapcloud.com&lt;/code&gt; 域名添加到 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;访问控制 -&amp;gt; 不走代理的域名&lt;/code&gt; 中：
&lt;img src=&quot;https://raw.githubusercontent.com/5cr1pt/img4markdown/master/pics/20200322164521.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</content><author><name></name></author><category term="nas" /><category term="qnap" /><summary type="html">当 QNAP NAS 设备接入的网络配置了自动翻墙的话，在 QNAP NAS 的 myQNAPcloud 应用中，My DDNS 功能就有可能将 IPv4 地址识别为翻墙的代理 IP 地址，从而无法通过系统设置的 DDNS 功能从自定义的 *.myqnapcloud.com 域名远程访问 NAS。</summary></entry><entry><title type="html">在 QNAP NAS 中安装 Flexget 并配置 RSS 订阅下载</title><link href="http://localhost:4000/nas/qnap/flexget/rss/2020/03/07/Install-Flexget-on-Qnap-NAS-md.html" rel="alternate" type="text/html" title="在 QNAP NAS 中安装 Flexget 并配置 RSS 订阅下载" /><published>2020-03-07T01:36:04+08:00</published><updated>2020-03-07T01:36:04+08:00</updated><id>http://localhost:4000/nas/qnap/flexget/rss/2020/03/07/Install-Flexget-on-Qnap-NAS-md</id><content type="html" xml:base="http://localhost:4000/nas/qnap/flexget/rss/2020/03/07/Install-Flexget-on-Qnap-NAS-md.html">&lt;p&gt;Flexget 配合种子下载软件（Transmission/Deluge 等），可以根据 RSS 链接和配置文件，自动下载订阅的种子，或进行相应的过滤，不必总是去种子站守资源或者搜索。一般的 PT 站都提供 RSS 订阅下载功能，订阅下载资源非常方便。&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;0x00-下载安装-flexget&quot;&gt;0x00 下载安装 Flexget&lt;/h2&gt;
&lt;blockquote&gt;
  &lt;p&gt;参考官网：https://flexget.com/InstallWizard/QNAP&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;SSH 连接到 NAS 并输入下面的命令：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;apt-get update &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; python-pip
pip &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--upgrade&lt;/span&gt; setuptools
pip &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;flexget
&lt;span class=&quot;nb&quot;&gt;mkdir&lt;/span&gt; /root/.flexget
&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; /root/.flexget
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;0x01-配置-rss-订阅下载&quot;&gt;0x01 配置 RSS 订阅下载&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 创建 flexget.yml 文件&lt;/span&gt;
vim flexget.yml
&lt;span class=&quot;c&quot;&gt;# 修改下面的配置信息并粘贴&lt;/span&gt;
tasks:
  my_feed:
    rss: https://somerssfeed.com/feed.xml   &lt;span class=&quot;c&quot;&gt;# rss 订阅链接&lt;/span&gt;
    accept_all: &lt;span class=&quot;nb&quot;&gt;yes
    &lt;/span&gt;transmission:
      host: &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;transmission-host&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# transmission 地址&lt;/span&gt;
      port: &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;transmission-port&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# transmission 端口号&lt;/span&gt;
      username: &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;transmission-username&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# transmission 用户名&lt;/span&gt;
      password: &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;transmission-password&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# transmission 密码&lt;/span&gt;
      path: /path/to/download   &lt;span class=&quot;c&quot;&gt;# 订阅下载的目录&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;0x02-配置自动刷新脚本&quot;&gt;0x02 配置自动刷新脚本&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 创建脚本&lt;/span&gt;
vim flexget.sh
&lt;span class=&quot;c&quot;&gt;# 将下面的配置粘贴到脚本中&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;LANG&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;en_US.UTF-8
&lt;span class=&quot;nv&quot;&gt;FLEXGETLOGFILE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/root/.flexget/flexget.log'&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# 配置日志文件&lt;/span&gt;
flexget &lt;span class=&quot;nt&quot;&gt;--cron&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--logfile&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$FLEXGETLOGFILE&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/root/.flexget/flexget.yml'&lt;/span&gt; execute    &lt;span class=&quot;c&quot;&gt;# 执行首次 RSS 订阅下载更新&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 记录错误信息到日志文件&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/ CRITICAL \s*rss .* HTTP error 502 received from /d'&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$FLEXGETLOGFILE&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/ CRITICAL \s*rss .* Internal server exception on task /d'&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$FLEXGETLOGFILE&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/ WARNING \s*task .* Aborting task /d'&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$FLEXGETLOGFILE&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/ INFO \s*manager .* Running database cleanup\./d'&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$FLEXGETLOGFILE&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/ INFO \s*db_analyze .* Running ANALYZE on database to improve performance\./d'&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$FLEXGETLOGFILE&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;给脚本分配执行的权限：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;chmod&lt;/span&gt; +x flexget.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;执行下面的命令，设置自动刷新（默认是每天刷新一次）：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;0 * * * * '/root/.flexget/flexget.sh'&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/etc/config/crontab'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;如果想要手动刷新 RSS 订阅下载信息的话，可以执行下面的命令：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;flexget &lt;span class=&quot;nt&quot;&gt;--cron&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--logfile&lt;/span&gt; /root/.flexget/flexget.log &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/root/.flexget/flexget.yml'&lt;/span&gt; execute
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;或者直接运行创建好的 flexget.sh 脚本：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; /root/.flexget/
./flexget.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;
  &lt;p&gt;每次重启 NAS 之后，所有配置信息都会丢失，需要重新填写。所以请备份第一次的配置信息方便恢复。&lt;/p&gt;
&lt;/blockquote&gt;</content><author><name></name></author><category term="nas" /><category term="qnap" /><category term="flexget" /><category term="rss" /><summary type="html">Flexget 配合种子下载软件（Transmission/Deluge 等），可以根据 RSS 链接和配置文件，自动下载订阅的种子，或进行相应的过滤，不必总是去种子站守资源或者搜索。一般的 PT 站都提供 RSS 订阅下载功能，订阅下载资源非常方便。</summary></entry></feed>