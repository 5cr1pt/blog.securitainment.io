<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
     <link rel="shortcut icon" href= //images/favicon.ico >
    <title>
        Securitainment.io
    </title>
    
<link rel="stylesheet" href="/libs/highlight/styles/monokai-sublime.css">

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.1"></head>
<body id="bodyx">
    <div class="hd posts">
    <a href="/index.html"><i class="fa fa-home
 replay-btn" aria-hidden="true"></i></a>
    <div class="post-title">
        <p>
            shadowsocks_libev 配置
        </p>
        <hr>
    </div>
    <div class="post-content">
        <h2 id="CentOS-搭建Shadowsocks-服务器"><a href="#CentOS-搭建Shadowsocks-服务器" class="headerlink" title="CentOS 搭建Shadowsocks 服务器"></a>CentOS 搭建Shadowsocks 服务器</h2><p>shadowsocks-libev是shadowsocks众多版本中的一种，它使用libuv + C 编写，500不到的代码，资源消耗非常小，再破的VPS都能跑得起来。相对于其他版本的shadowsocks，shadowsocks-libev不会出现掉进程或cpu 100%的问题。</p>
<a id="more"></a>

<h1 id="安装必要组件"><a href="#安装必要组件" class="headerlink" title="安装必要组件"></a>安装必要组件</h1><pre><code>yum install build-essential autoconf libtool openssl-devel gcc -y</code></pre><h1 id="安装Git"><a href="#安装Git" class="headerlink" title="安装Git"></a>安装Git</h1><pre><code>yum install git -y</code></pre><p>装完了执行<code>git --version</code>如果出现版本号则安装成功</p>
<h1 id="下载Shadowsocks-libev-源码包并编译"><a href="#下载Shadowsocks-libev-源码包并编译" class="headerlink" title="下载Shadowsocks-libev 源码包并编译"></a>下载Shadowsocks-libev 源码包并编译</h1><pre><code>git clone https://github.com/shadowsocks/shadowsocks-libev.git
cd shadowsocks-libev
./configure
make &amp;&amp; make install</code></pre><h1 id="运行Shadowsocks"><a href="#运行Shadowsocks" class="headerlink" title="运行Shadowsocks"></a>运行Shadowsocks</h1><pre><code>nohup /usr/local/bin/ss-server -s IP -p PORT -k PASSWORD -m ENCRYPT_METHOD &amp;
比如：
nohup /usr/local/bin/ss-server -s 192.168.1.1 -p 8838 -k password -m rc4-md5 &amp;</code></pre><h1 id="加入开机自动启动"><a href="#加入开机自动启动" class="headerlink" title="加入开机自动启动"></a>加入开机自动启动</h1><pre><code>echo &quot;nohup /usr/local/bin/ss-server -s 192.168.1.1 -p 8838 -k password -m rc4-md5 &amp;&quot;&gt;&gt;/etc/rc.local</code></pre><h1 id="防火墙例外"><a href="#防火墙例外" class="headerlink" title="防火墙例外"></a>防火墙例外</h1><p>添加例外：</p>
<pre><code>iptables -A INPUT -p tcp --dport PORT -j ACCEPT</code></pre><p>不过我没成功所以我是直接清除防火墙规则的。</p>
<p>查看防火墙规则：</p>
<pre><code>[root@vultr ~]# iptables -L -n
Chain INPUT (policy ACCEPT)
target     prot opt source               destination
ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0           state RELATED,ESTABLISHED
ACCEPT     icmp --  0.0.0.0/0            0.0.0.0/0
ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0
ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0           state NEW tcp dpt:22
REJECT     all  --  0.0.0.0/0            0.0.0.0/0           reject-with icmp-host-prohibited

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination
REJECT     all  --  0.0.0.0/0            0.0.0.0/0           reject-with icmp-host-prohibited

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination</code></pre><p>清除掉所有规则：</p>
<pre><code>[root@vultr ~]# iptables -L
Chain INPUT (policy ACCEPT)
target     prot opt source               destination

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination</code></pre><p><strong>Shadowsocks 客户端</strong></p>
<p>shadowsocks <a href="https://shadowsocks.org/en/download/clients.html" target="_blank" rel="noopener">下载地址</a></p>
<p><strong>加密方式</strong></p>
<p>如果启动命令里不写<code>-m aes-256-cfb</code>的话，则默认的加密方式为table，我也推荐使用这种加密，因为速度最快。选择aes-256-cfb则比较安全，其实对速度也几乎没有影响。</p>
<p><strong>关于结束服务</strong></p>
<p><code>ps aux</code>会看到<code>/usr/local/bin/ss-server ……</code>的进程，kill掉即可，比如<code>kill 29899</code></p>

    </div>

    
</div>
    <div class="footer" id="footer">
    <p><h4>Copyright © 2020 | Author: Groot | <a href="https://github.com/Xunzhuo/hexo-theme-coder" target="_blank" rel="noopener">Theme: Hexo-Coder</a></h4>
        <label class="el-switch el-switch-blue el-switch-sm" style="vertical-align: sub;">
            <input type="checkbox" name="switch" id="update_style">
            <span class="el-switch-style"></span>
        </label>
<!--         <script type="text/javascript">
        var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");
        document.write(unescape("%3Cspan id='cnzz_stat_icon_1278548644'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/stat.php%3Fid%3D1278548644%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
        </script> -->
    </p>
</div>
<input type="hidden" id="web_style" value="black">
<input type="hidden" id="valine_appid" value="">
<input type="hidden" id="valine_appKey" value="">

<script src="/libs/jquery.min.js"></script>


<script src="/libs/highlight/highlight.pack.js"></script>

<script src='//cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>

<script src="/js/js.js"></script>

<style type="text/css">
.v * {
    color: #698fca;
}

.v .vlist .vcard .vhead .vsys {
    color: #3a3e4a;
}

.v .vlist .vcard .vh .vmeta .vat {
    color: #638fd5;
}

.v .vlist .vcard .vhead .vnick {
    color: #6ba1ff;
}

.v a {
    color: #8696b1;
}

.v .vlist .vcard .vhead .vnick:hover {
    color: #669bfc;
}
</style>
</body>
</html>